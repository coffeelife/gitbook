
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Gitlab CI/CD · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="RN中场景一之RN和原生交互.html" />
    
    
    <link rel="prev" href="Android原生Table组件开发整理.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Android组件化开发.html">
            
                <a href="Android组件化开发.html">
            
                    
                    Android组件化开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="Android开发工具之OKHttp日志抓取.html">
            
                <a href="Android开发工具之OKHttp日志抓取.html">
            
                    
                    Android开发工具之OKHttp日志抓取（仿IOS DBDebugToolkit)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="Android开发工具之环境切换.html">
            
                <a href="Android开发工具之环境切换.html">
            
                    
                    Android开发工具之环境切换
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="热更新在Cordova平台的实践.html">
            
                <a href="热更新在Cordova平台的实践.html">
            
                    
                    热更新(HotCode)在Cordova平台的实践
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="ES6新特性学习.html">
            
                <a href="ES6新特性学习.html">
            
                    
                    ES6新特性学习
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="H5常见router.html">
            
                <a href="H5常见router.html">
            
                    
                    H5常见router
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="webpack使用学习.html">
            
                <a href="webpack使用学习.html">
            
                    
                    webpack使用学习
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="Web安全问题之CSRF和XSS.html">
            
                <a href="Web安全问题之CSRF和XSS.html">
            
                    
                    Web安全问题之CSRF和XSS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="路由系统重构文档.html">
            
                <a href="路由系统重构文档.html">
            
                    
                    路由系统重构文档
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="前端干货：JS的执行顺序.html">
            
                <a href="前端干货：JS的执行顺序.html">
            
                    
                    前端干货：JS的执行顺序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="前端学习之路.html">
            
                <a href="前端学习之路.html">
            
                    
                    前端学习之路
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="热更新HotCode在Cordova平台的实践.html">
            
                <a href="热更新HotCode在Cordova平台的实践.html">
            
                    
                    热更新(HotCode)在Cordova平台的实践
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="Android开发工具之OKHttp日志抓取之升级版.html">
            
                <a href="Android开发工具之OKHttp日志抓取之升级版.html">
            
                    
                    Android开发工具之OKHttp日志抓取之升级版
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="Android原生Table组件开发整理.html">
            
                <a href="Android原生Table组件开发整理.html">
            
                    
                    Android原生Table组件开发整理
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.16" data-path="Gitlab.html">
            
                <a href="Gitlab.html">
            
                    
                    Gitlab CI/CD
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="RN中场景一之RN和原生交互.html">
            
                <a href="RN中场景一之RN和原生交互.html">
            
                    
                    RN中场景一之RN和原生交互
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="Taro小程序开发学习.html">
            
                <a href="Taro小程序开发学习.html">
            
                    
                    Taro小程序开发学习
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="Taro小程序dva框架开发学习.html">
            
                <a href="Taro小程序dva框架开发学习.html">
            
                    
                    Taro小程序dva框架开发学习
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Gitlab CI/CD</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="gitlab-cicd">Gitlab CI/CD</h1>
<h2 id="&#x6982;&#x5FF5;">&#x6982;&#x5FF5;</h2>
<h3 id="devops">DevOps</h3>
<p>Development &#x548C; Operations &#x7684;&#x7EC4;&#x5408;&#xFF0C;&#x4F20;&#x7EDF;&#x7684;&#x8F6F;&#x4EF6;&#x7EC4;&#x7EC7;&#x8BB2;&#x5F00;&#x53D1;&#x548C; IT &#x8FD0;&#x8425;&#x4EE5;&#x53CA;&#x8D28;&#x91CF;&#x4FDD;&#x969C;&#x8BBE;&#x4E3A;&#x5206;&#x79BB;&#x7684;&#x90E8;&#x95E8;&#xFF0C;Devops &#x662F;&#x5728;&#x654F;&#x6377;&#x5F00;&#x53D1;&#x6A21;&#x578B;&#x4E0A;&#x8FDB;&#x4E00;&#x6B65;&#x53D1;&#x5C55;&#x800C;&#x6765;&#x7684;&#x3002;&#x6EE1;&#x8DB3;&#x4E86;&#x4EA7;&#x54C1;&#x7814;&#x53D1;&#x6240;&#x8981;&#x6C42;&#x7684;&#x6301;&#x7EED;&#x5F00;&#x53D1;&#x3001;&#x6301;&#x7EED;&#x6D4B;&#x8BD5;&#x3001;&#x6301;&#x7EED;&#x96C6;&#x6210;&#x3001;&#x6301;&#x7EED;&#x90E8;&#x7F72;&#x3002;</p>
<h3 id="cicd">CI/CD</h3>
<p>&#x5373; Continuous Integration&#xFF08;&#x6301;&#x7EED;&#x96C6;&#x6210;&#xFF09;&#x548C; Continuous Delivery&#xFF08;&#x6301;&#x7EED;&#x4EA4;&#x4ED8;&#xFF09;Continuous Deployment&#xFF08;&#x6301;&#x7EED;&#x90E8;&#x7F72;&#xFF09;&#x3002;</p>
<h3 id="pipeline">pipeline</h3>
<p>&#x914D;&#x7F6E;&#x597D;&#x7684; CI/CD &#x7684;&#x6D41;&#x7A0B;&#xFF0C;&#x6BD4;&#x5982;&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x5305;&#xFF0C;&#x8FDB;&#x884C;&#x4EE3;&#x7801; review&#x3001;&#x6784;&#x5EFA;&#x3001;&#x7F16;&#x8BD1;&#x3001;&#x53D1;&#x5E03;&#x7B49;&#x4E00;&#x6574;&#x5957;&#x7684;&#x6D41;&#x7A0B;&#x3002;</p>
<h3 id="gitlab-runner">GitLab Runner</h3>
<p>&#x6267;&#x884C;&#x6D41;&#x6C34;&#x7EBF;&#x7684;&#x73AF;&#x5883;&#xFF0C;&#x6240;&#x6709; CI/CD &#x7684;&#x4EFB;&#x52A1;&#x90FD;&#x662F;&#x5728;&#x4ED6;&#x5185;&#x90E8;&#x53BB;&#x8FDB;&#x884C;&#x6267;&#x884C;&#x7684;&#xFF0C;GitLab&#x8D1F;&#x8D23;&#x4EE3;&#x7801;&#x7BA1;&#x7406;&#xFF0C;Runner&#x662F;&#x6D41;&#x6C34;&#x7EBF;&#xFF0C;CI/CD &#x7684;&#x6267;&#x884C;&#x73AF;&#x5883;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x5728;&#x5728; GNU/Linux&#x3001;K8s&#x3001;Docker&#x3001;macOS &#x548C; Windows &#x4E0A;</p>
<h2 id="&#x5DE5;&#x5177;">&#x5DE5;&#x5177;</h2>
<ul>
<li><p>GitLab-Runner</p>
</li>
<li><p>Git</p>
</li>
<li><p>Node</p>
</li>
<li><p>npm or Yarn</p>
</li>
</ul>
<h2 id="&#x5B89;&#x88C5;docker&#x4EE5;&#x53CA;gitlab-runner">&#x5B89;&#x88C5;docker&#x4EE5;&#x53CA;gitlab-runner</h2>
<p>&#x8FDE;&#x63A5;&#x670D;&#x52A1;&#x5668;</p>
<pre><code>ssh root@10.0.0.xxx
</code></pre><p>&#x5B89;&#x88C5;docker</p>
<pre><code>curl -fsSL get.docker.com -o get-docker.sh
sudo sh get-docker.sh --mirror Aliyun
</code></pre><p>&#x5F00;&#x542F;&#x670D;&#x52A1;&#x548C;&#x6743;&#x9650;&#x914D;&#x7F6E;</p>
<pre><code>sudo groupadd docker  # &#x521B;&#x5EFA; docker &#x7528;&#x6237;&#x7EC4;
sudo usermod -aG docker $USER  # &#x5C06;&#x5F53;&#x524D;&#x7528;&#x6237;&#x52A0;&#x5165;&#x5230; docker &#x7684;&#x7528;&#x6237;&#x7EC4;&#x4E2D;
</code></pre><p>&#x542F;&#x52A8; Docker</p>
<pre><code>sudo systemctl enable docker
sudo systemctl start docker
//&#x9A8C;&#x8BC1; Docker &#x73AF;&#x5883;&#x5B89;&#x88C5;&#x6210;&#x529F;
docker info
</code></pre><p>&#x5B89;&#x88C5;GItlab</p>
<pre><code>sudo docker run --detach \
  --hostname 115.159.52.223 \
  --publish 443:443 --publish 80:80 --publish 222:22 \
  --name gitlab \
  --restart always \
  --volume /srv/gitlab/config:/etc/gitlab \
  --volume /srv/gitlab/logs:/var/log/gitlab \
  --volume /srv/gitlab/data:/var/opt/gitlab \
  gitlab/gitlab-ce:latest
</code></pre><pre><code>--detach&#xFF1A;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#xFF0C;&#x5982;&#x679C;&#x53BB;&#x6389;&#xFF0C;&#x4F1A;&#x770B;&#x5230;&#x6267;&#x884C;&#x7684;&#x6574;&#x4E2A;&#x8FC7;&#x7A0B;&#x65E5;&#x5FD7;&#x3002;
--hostname&#xFF1A;&#x6307;&#x5B9A;&#x8FD0;&#x884C;&#x7684; hostname&#xFF0C;&#x53EF;&#x4EE5;&#x662F;&#x57DF;&#x540D;&#x4E5F;&#x53EF;&#x4EE5;&#x662F; IP&#x3002;
--publish&#xFF1A;&#x7AEF;&#x53E3;&#x7684;&#x6620;&#x5C04;&#xFF0C;&#x53EF;&#x4EE5;&#x7F29;&#x5199;&#x6210; -p 443 &#x7528;&#x4E8E; HTTPS &#x534F;&#x8BAE;&#x8BBF;&#x95EE;&#xFF0C;222 &#x7528;&#x6237; SSH &#x534F;&#x8BAE;&#x8BBF;&#x95EE;&#xFF0C;&#x56E0;&#x4E3A; 22 &#x7AEF;&#x53E3;&#x5DF2;&#x7ECF;&#x88AB;&#x5360;&#x7528;&#x3002;
--name&#xFF1A;&#x5BB9;&#x5668;&#x7684;&#x540D;&#x79F0;&#x3002;
--restart&#xFF1A;&#x91CD;&#x542F;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x91CD;&#x542F;&#x3002;
--volume&#xFF1A;&#x6307;&#x5B9A;&#x672C;&#x5730;&#x5377;&#xFF0C;&#x914D;&#x7F6E;&#x3001;&#x65E5;&#x5FD7;&#x3001;&#x6570;&#x636E;&#xFF0C;&#x4F7F;&#x7528;&#x672C;&#x5730;&#x5377;&#x540E;&#xFF0C;&#x5220;&#x9664;&#x5BB9;&#x5668;&#xFF0C;&#x4E0D;&#x4F1A;&#x5220;&#x9664;&#x914D;&#x7F6E;&#x3001;&#x6570;&#x636E;&#x3002;
</code></pre><pre><code>no&#xFF1A;&#x9ED8;&#x8BA4;&#x7B56;&#x7565;&#xFF0C;&#x5728;&#x5BB9;&#x5668;&#x9000;&#x51FA;&#x65F6;&#x4E0D;&#x91CD;&#x542F;&#x5BB9;&#x5668;
on-failure&#xFF1A;&#x5728;&#x5BB9;&#x5668;&#x975E;&#x6B63;&#x5E38;&#x9000;&#x51FA;&#x65F6;&#xFF08;&#x9000;&#x51FA;&#x72B6;&#x6001;&#x975E; 0&#xFF09;&#xFF0C;&#x624D;&#x4F1A;&#x91CD;&#x542F;&#x5BB9;&#x5668;
on-failure:3&#xFF1A;&#x5728;&#x5BB9;&#x5668;&#x975E;&#x6B63;&#x5E38;&#x9000;&#x51FA;&#x65F6;&#x91CD;&#x542F;&#x5BB9;&#x5668;&#xFF0C;&#x6700;&#x591A;&#x91CD;&#x542F; 3 &#x6B21;
always&#xFF1A;&#x5728;&#x5BB9;&#x5668;&#x9000;&#x51FA;&#x65F6;&#x603B;&#x662F;&#x91CD;&#x542F;&#x5BB9;&#x5668;
unless-stopped&#xFF1A;&#x5728;&#x5BB9;&#x5668;&#x9000;&#x51FA;&#x65F6;&#x603B;&#x662F;&#x91CD;&#x542F;&#x5BB9;&#x5668;&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x8003;&#x8651;&#x5728; Docker &#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x542F;&#x52A8;&#x65F6;&#x5C31;&#x5DF2;&#x7ECF;&#x505C;&#x6B62;&#x4E86;&#x7684;&#x5BB9;&#x5668;
</code></pre><p><a href="https://docs.gitlab.com/runner/install/index.html" target="_blank">Install GitLab Runner | GitLab</a></p>
<pre><code>docker run -d --name gitlab-runner --restart always \
  -v /srv/gitlab-runner/config:/etc/gitlab-runner \
  -v /var/run/docker.sock:/var/run/docker.sock \
  gitlab/gitlab-runner:latest
</code></pre><p>&#x5B89;&#x88C5;<code>gitlab-runner</code></p>
<pre><code>curl -L --output /usr/local/bin/gitlab-runner &quot;https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-amd64&quot;
chmod +x /usr/local/bin/gitlab-runner
useradd --comment &apos;GitLab Runner&apos; --create-home gitlab-runner --shell /bin/bash
gpasswd -a gitlab-runner docker
newgrp docker
gitlab-runner install --user=gitlab-runner --working-directory=/home/gitlab-runner
gitlab-runner start
</code></pre><h2 id="2&#x6CE8;&#x518C;gitlab-runner">2.&#x6CE8;&#x518C;Gitlab-runner</h2>
<p>&#x8DEF;&#x5F84; &#x8BBE;&#x7F6E; &gt; CI/CD &gt; Runner &gt; Expand &#x5982;&#x56FE;</p>
<p><img src="Users/gm/Library/Application%20Support/marktext/images/2022-06-29-17-15-35-image.png" alt=""></p>
<p><code>docker</code>&#x65B9;&#x5F0F;</p>
<pre><code>docker run --rm -v /srv/gitlab-runner/config:/etc/gitlab-runner gitlab/gitlab-runner register \
  --non-interactive \
  --executor &quot;docker&quot; \
  --docker-image node:16.15.1 \
  --url &quot;http://gitlab.example.com/&quot; \
  --registration-token &quot;TOKEN&quot; \
  --description &quot;coronary_runner_138&quot; \
  --tag-list &quot;docker,coronary&quot; \
  --run-untagged=&quot;true&quot; \
  --locked=&quot;false&quot; \
  --access-level=&quot;not_protected&quot;
</code></pre><p>&#x8FDB;&#x5165;Runner&#x5BB9;&#x5668;&#x5185;</p>
<pre><code class="lang-bash">docker <span class="hljs-built_in">exec</span> -it gitlab-runner bash
gitlab-runner register ...
</code></pre>
<p>&#x666E;&#x901A;&#x65B9;&#x5F0F;</p>
<pre><code>gitlab-runner register \
  --non-interactive \
  --url &quot;http://gitlab.example.com/&quot; \
  --registration-token &quot;TOKEN&quot; \
  --executor &quot;docker&quot; \
  --docker-image node:16.15.1 \
  --description &quot;coronary_runner_138&quot; \
  --tag-list &quot;docker,coronary&quot; \
  --run-untagged=&quot;true&quot; \
  --locked=&quot;false&quot; \
  --access-level=&quot;not_protected&quot;
</code></pre><h3 id="&#x53D6;&#x6D88;&#x6CE8;&#x518C;runner">&#x53D6;&#x6D88;&#x6CE8;&#x518C;runner</h3>
<pre><code>gitlab-runner unregister --url http://example.com/ --token xxxxxxxx
</code></pre><p><code>url</code>&#x4FEE;&#x6539;&#x6210;&#x81EA;&#x5DF1;&#x7684;<code>http://gitlab.exmaple.com/</code></p>
<p><code>registration-token</code>&#x4FEE;&#x6539;&#x6210;&#x81EA;&#x5DF1;&#x7684;<code>TOKEN</code></p>
<p><img src="Users/gm/Library/Application%20Support/marktext/images/2022-06-24-11-19-43-image.png" alt=""></p>
<p>gitlab&#x540E;&#x53F0;&#x6CE8;&#x518C;&#x7684;&#x53EF;&#x7528;runner</p>
<p>&#x9664;&#x4E86; url &#x548C; registration-token &#x8FD8;&#x6709;&#x51E0;&#x4E2A;&#x5C5E;&#x6027;&#xFF1A;</p>
<ol>
<li><p>executor&#xFF1A;&#x6267;&#x884C;&#x5668;&#xFF0C;&#x53EF;&#x9009; docker&#x3001;k8s&#x3001;shell</p>
</li>
<li><p>description&#xFF1A;runner &#x7684;&#x63CF;&#x8FF0;</p>
</li>
<li><p>tag-list&#xFF1A;runner &#x7684; tag&#xFF0C;&#x4F7F;&#x7528;&#x9017;&#x53F7;&#x5206;&#x9694;&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x9879;&#x76EE;&#x6709;&#x591A;&#x4E2A; Runner&#xFF0C;&#x9700;&#x8981;&#x6839;&#x636E; tag &#x6765;&#x6307;&#x5B9A;&#x4F7F;&#x7528;&#x90A3;&#x4E2A; Runner &#x6765;&#x8FD0;&#x884C;&#x4EFB;&#x52A1;</p>
</li>
<li><p>locked&#xFF1A;&#x662F;&#x5426;&#x9501;&#x5B9A;&#xFF0C;&#x9501;&#x5B9A;&#x540E;&#xFF0C;&#x53EA;&#x80FD;&#x9002;&#x7528;&#x4E8E;&#x88AB;&#x9879;&#x76EE;&#xFF0C;&#x4E0D;&#x80FD;&#x88AB;&#x5176;&#x4ED6;&#x9879;&#x76EE;&#x4F7F;&#x7528;</p>
</li>
</ol>
<h3 id="&#x5173;&#x952E;&#x8BCD;">&#x5173;&#x952E;&#x8BCD;</h3>
<p>script &#x88AB; runner &#x6267;&#x884C;&#x7684; shell script
after_script &#x5728; job &#x4E4B;&#x540E;&#x6267;&#x7684;&#x811A;&#x672C;
allow_failure &#x662F;&#x5426;&#x5141;&#x8BB8; job &#x5931;&#x8D25;
artifacts &#x5728; job &#x6210;&#x529F;&#x540E;&#x5C06;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x5217;&#x8868;&#x6216;&#x76EE;&#x5F55;&#x5217;&#x8868;&#x5236;&#x6210;&#x5236;&#x54C1;&#x4E0A;&#x4F20;
before_script &#x5728; job &#x4E4B;&#x524D;&#x6267;&#x884C;&#x7684;&#x811A;&#x672C;
cache &#x7F13;&#x5B58;&#x5728;&#x968F;&#x540E;&#x7684; job &#x7684;&#x4E00;&#x4E9B;&#x6587;&#x4EF6;&#x3001;&#x76EE;&#x5F55;
coverage &#x4EE3;&#x7801;&#x8986;&#x76D6;&#x7387;&#x8BBE;&#x7F6E;
dependencies &#x4F9D;&#x8D56;&#x67D0;&#x4E2A; job &#x7684;&#x5236;&#x54C1;&#x5E76;&#x4E0B;&#x8F7D;&#x5230;&#x5F53;&#x524D;&#x7684; job &#x4E2D;
environment job &#x4F9D;&#x8D56;&#x7684;&#x73AF;&#x5883;&#x53D8;&#x91CF;
except &#x9650;&#x5236;&#x90A3;&#x4E9B;&#x60C5;&#x51B5; job &#x4E0D;&#x4F1A;&#x88AB;&#x89E6;&#x53D1;
extends job &#x7684;&#x7EE7;&#x627F;&#x7684;&#x914D;&#x7F6E;&#x9879;
image &#x4F9D;&#x8D56;&#x7684; Docker &#x955C;&#x50CF;
include &#x8FD0;&#x884C; job &#x5305;&#x542B;&#x989D;&#x5916;&#x7684; yml &#x6587;&#x4EF6;
interruptible &#x5B9A;&#x4E49;&#x5F53;&#x4F5C;&#x4E1A;&#x56E0;&#x8F83;&#x65B0;&#x7684;&#x8FD0;&#x884C;&#x800C;&#x53D8;&#x5F97;&#x5197;&#x4F59;&#x65F6;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x53D6;&#x6D88;&#x3002;
only &#x9650;&#x5236; job &#x4F55;&#x65F6;&#x53EF;&#x4EE5;&#x88AB;&#x89E6;&#x53D1;
pages &#x4E0A;&#x4F20; job &#x7684;&#x7ED3;&#x679C;&#x5230; &#x6781;&#x72D0;GitLab Pages
parallel &#x4E00;&#x4E2A; job &#x5E94;&#x8BE5;&#x5E76;&#x884C;&#x8FD0;&#x884C;&#x591A;&#x5C11;&#x4E2A;&#x5B9E;&#x4F8B;&#x3002;
release &#x901A;&#x77E5; runner &#x751F;&#x6210;&#x4E00;&#x4E2A; release
resource_group &#x9650;&#x5236; job &#x7684;&#x5E76;&#x53D1;&#x6027;
retry &#x662F;&#x5426;&#x91CD;&#x8BD5; &#x91CD;&#x8BD5;&#x51E0;&#x6B21;
rules &#x4E0E; only/except &#x7C7B;&#x4F3C;&#xFF0C;&#x9650;&#x5236; job &#x7684;&#x8C03;&#x8D77;
services &#x4F7F;&#x7528; Docker &#x955C;&#x50CF;&#x670D;&#x52A1;
stage &#x9636;&#x6BB5;
tags &#x9009;&#x62E9; runner &#x7684; tag
timeout &#x8D85;&#x65F6;
trigger &#x5B9A;&#x4E49;&#x4E0B;&#x6E38; pipelines &#x89E6;&#x53D1;&#x5668;
variables &#x5B9A;&#x4E49; job &#x7EA7;&#x522B;&#x7684;&#x53D8;&#x91CF;
when &#x4F55;&#x65F6;&#x89E6;&#x53D1;&#x4EFB;&#x52A1;</p>
<p><code>only</code> &#x548C; <code>except</code> &#x4E2D;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7279;&#x6B8A;&#x7684;&#x5173;&#x952E;&#x5B57;&#xFF1A;</p>
<ul>
<li>&#x5F53;&#x4E00;&#x4E2A;&#x4F5C;&#x4E1A;&#x6CA1;&#x6709;&#x5B9A;&#x4E49; <code>only</code> &#x89C4;&#x5219;&#x65F6;&#xFF0C;&#x5176;&#x9ED8;&#x8BA4;&#x4E3A; <code>only: [&apos;branches&apos;, &apos;tags&apos;]</code> &#x3002;</li>
<li>&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x4F5C;&#x4E1A;&#x6CA1;&#x6709;&#x5B9A;&#x4E49; <code>except</code> &#x89C4;&#x5219;&#x65F6;&#xFF0C;&#x5219;&#x9ED8;&#x8BA4; <code>except</code> &#x89C4;&#x5219;&#x4E3A;&#x7A7A;&#x3002;</li>
</ul>
<table>
<thead>
<tr>
<th>&#x5173;&#x952E;&#x5B57;</th>
<th>&#x63CF;&#x8FF0;&#x91CA;&#x4E49;</th>
</tr>
</thead>
<tbody>
<tr>
<td>branches</td>
<td>&#x5F53;&#x4E00;&#x4E2A;&#x5206;&#x652F;&#x88AB;push&#x4E0A;&#x6765;</td>
</tr>
<tr>
<td>tags</td>
<td>&#x5F53;&#x4E00;&#x4E2A;&#x6253;&#x4E86;tag&#x6807;&#x8BB0;&#x7684;Release&#x88AB;&#x63D0;&#x4EA4;&#x65F6;</td>
</tr>
<tr>
<td>api</td>
<td>&#x5F53;&#x4E00;&#x4E2A;pipline&#x88AB;&#x7B2C;&#x4E8C;&#x4E2A;piplines api&#x6240;&#x89E6;&#x53D1;&#x8C03;&#x8D77;(&#x4E0D;&#x662F;&#x89E6;&#x53D1;&#x5668;API)</td>
</tr>
<tr>
<td>external</td>
<td>&#x5F53;&#x4F7F;&#x7528;&#x4E86;GitLab&#x4EE5;&#x5916;&#x7684;&#x5916;&#x90E8;CI&#x670D;&#x52A1;&#xFF0C;&#x5982;Jenkins</td>
</tr>
<tr>
<td>pipelines</td>
<td>&#x9488;&#x5BF9;&#x591A;&#x9879;&#x76EE;&#x89E6;&#x53D1;&#x5668;&#x800C;&#x8A00;&#xFF0C;&#x5F53;&#x4F7F;&#x7528;CI_JOB_TOKEN&#xFF0C; &#x5E76;&#x4F7F;&#x7528;gitlab&#x6240;&#x63D0;&#x4F9B;&#x7684;api&#x521B;&#x5EFA;&#x591A;&#x4E2A;pipelines&#x7684;&#x65F6;&#x5019;</td>
</tr>
<tr>
<td>pushes</td>
<td>&#x5F53;pipeline&#x88AB;&#x7528;&#x6237;&#x7684;git push&#x64CD;&#x4F5C;&#x6240;&#x89E6;&#x53D1;&#x7684;&#x65F6;&#x5019;</td>
</tr>
<tr>
<td>schedules</td>
<td>&#x9488;&#x5BF9;&#x9884;&#x5B9A;&#x597D;&#x7684;pipline&#x8BA1;&#x5212;&#x800C;&#x8A00;&#xFF08;&#x6BCF;&#x65E5;&#x6784;&#x5EFA;&#x4E00;&#x7C7B;&#xFF09;</td>
</tr>
<tr>
<td>triggers</td>
<td>&#x7528;&#x89E6;&#x53D1;&#x5668;token&#x521B;&#x5EFA;piplines&#x7684;&#x65F6;&#x5019;</td>
</tr>
<tr>
<td>web</td>
<td>&#x5728;GitLab WEB&#x9875;&#x9762;&#x4E0A;Pipelines&#x6807;&#x7B7E;&#x9875;&#x4E0B;&#xFF0C;&#x6309;&#x4E0B;run pipline&#x7684;&#x65F6;&#x5019;</td>
</tr>
<tr>
<td>merge_requests</td>
<td>&#x5F53;&#x5408;&#x5E76;&#x8BF7;&#x6C42;&#x521B;&#x5EFA;&#x6216;&#x66F4;&#x65B0;&#x7684;&#x65F6;&#x5019;</td>
</tr>
<tr>
<td>chats</td>
<td>&#x5F53;&#x4F7F;&#x7528;GitLab ChatOps &#x521B;&#x5EFA;&#x4F5C;&#x4E1A;&#x7684;&#x65F6;&#x5019;</td>
</tr>
</tbody>
</table>
<h3 id="only-&#x548C;-except&#x9AD8;&#x7EA7;&#x7528;&#x6CD5;">only &#x548C; except&#x9AD8;&#x7EA7;&#x7528;&#x6CD5;</h3>
<ul>
<li><code>only</code> &#x548C; <code>except</code> &#x652F;&#x6301;&#x9AD8;&#x7EA7;&#x7B56;&#x7565;&#xFF0C;<code>refs</code> &#x3001; <code>variables</code> &#x3001; <code>changes</code> &#x3001; <code>kubernetes</code> &#x56DB;&#x4E2A;&#x5173;&#x952E;&#x5B57;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x3002;</li>
<li>&#x5982;&#x679C;&#x540C;&#x65F6;&#x4F7F;&#x7528;&#x591A;&#x4E2A;&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x4E2D;&#x95F4;&#x7684;&#x903B;&#x8F91;&#x662F; <code>&#x903B;&#x8F91;&#x4E0E;AND</code> &#x3002;</li>
</ul>
<pre><code>only:
    refs:
      - master
      - schedules


 only:
    refs:
      - branches
    variables:
      - $RELEASE == &quot;staging&quot;
      - $STAGING

only:
    changes:
      - package.json


//&#x7ED3;&#x5408;&#x4F7F;&#x7528;
only:
    refs:
      - master
    changes:
      - package.json

//&#x5F53;md&#x6587;&#x4EF6;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x65F6;&#xFF0C;&#x4F1A;&#x5FFD;&#x7565;CI&#x4F5C;&#x4E1A;
except:
    changes:
      - &quot;*.md&quot;

//&#x4E00;&#x65E6;&#x5408;&#x5E76;&#x8BF7;&#x6C42;&#x4E2D;&#x4FEE;&#x6539;&#x4E86;js&#x6587;&#x4EF6;&#x6216;&#x8005;&#x4FEE;&#x6539;&#x4E86;utils&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x90FD;&#x4F1A;&#x89E6;&#x53D1;Docker&#x6784;&#x5EFA;
only:
    refs:
      - merge_requests
    changes:
      - /^*.js$/
      - utils/**/*
</code></pre><h2 id="gitlab-ciyml&#x6587;&#x4EF6;">gitlab-ci.yml&#x6587;&#x4EF6;</h2>
<p><a href="http://www.ruanyifeng.com/blog/2016/07/yaml.html" target="_blank">&#x962E;&#x4E00;&#x5CF0; YAML &#x6559;&#x7A0B;</a></p>
<h4 id="branch&#x5206;&#x652F;&#x89E6;&#x53D1;&#x6784;&#x5EFA;&#x6D41;&#x7A0B;">branch&#x5206;&#x652F;&#x89E6;&#x53D1;&#x6784;&#x5EFA;&#x6D41;&#x7A0B;</h4>
<pre><code># &#x5B9A;&#x4E49;node&#x955C;&#x50CF;
image: node:16.15.1

before_script:
  - echo &quot;&#x6BCF;&#x4E2A;job&#x4E4B;&#x524D;&#x90FD;&#x4F1A;&#x6267;&#x884C;&quot;
  - node -v
  - npm -v
  - git --version
  - npm install -g cnpm --registry=https://registry.npm.taobao.org
  # - yarn -v

variables:
  GIT_SUBMODULE_STRATEGY: recursive

# &#x9636;&#x6BB5;
stages:
  - install
  - init
  - build
  - deploy

cache:
  paths:
    - node_modules/
    - build/

# &#x5B89;&#x88C5;&#x4F9D;&#x8D56;
install:
  stage: install
  # &#x6B64;&#x5904;&#x7684;tags&#x5FC5;&#x987B;&#x586B;&#x5165;&#x4E4B;&#x524D;&#x6CE8;&#x518C;&#x65F6;&#x81EA;&#x5B9A;&#x7684;tag
  tags:
    - docker
  # &#x89C4;&#x5B9A;&#x4EC5;&#x5728;package.json&#x63D0;&#x4EA4;&#x65F6;&#x624D;&#x89E6;&#x53D1;&#x6B64;&#x9636;&#x6BB5;
  only:
    changes:
      - package.json
  # only:
  #   - dev-mguo
  #   - /^dev-*$/
  # &#x6267;&#x884C;&#x811A;&#x672C;
  script:
    - cnpm install

init:
  stage: init
  tags:
    - docker
  only:
    - dev-mguo
  # &#x6267;&#x884C;&#x811A;&#x672C;
  script:
    - git submodule init &amp;&amp; git submodule update &amp;&amp; cd framework &amp;&amp; git checkout dev &amp;&amp; git pull &amp;&amp; cd ../

# &#x6253;&#x5305;&#x9879;&#x76EE;
build:
  stage: build
  only:
    - dev-mguo
  tags:
    - docker
  script:
    - npm run build
  # &#x5C06;&#x6B64;&#x9636;&#x6BB5;&#x4EA7;&#x7269;&#x4F20;&#x9012;&#x81F3;&#x4E0B;&#x4E00;&#x9636;&#x6BB5;
  artifacts:
    paths:
      - build/

# &#x90E8;&#x7F72;&#x9879;&#x76EE;
deploy:
  stage: deploy
  only:
    - dev-mguo
  tags:
    - docker
  script:
    # &#x76F4;&#x63A5;&#x7F16;&#x8BD1;&#x4E0A;&#x4F20;
    npm run deploy
  # when: manual


# tags &#x89E6;&#x53D1;
</code></pre><h4 id="tags&#x89E6;&#x53D1;&#x6D41;&#x7A0B;">tags&#x89E6;&#x53D1;&#x6D41;&#x7A0B;</h4>
<pre><code>//&#x65B0;&#x5EFA;tag
git tag -a v1.0 -m &quot;Release v1.0&quot;
//&#x67E5;&#x770B;tag
git tag
//&#x663E;&#x793A;tag&#x9644;&#x6CE8;&#x4FE1;&#x606F;
git show v1.0
//&#x63D0;&#x4EA4;&#x672C;&#x5730;tag&#x5230;&#x8FDC;&#x7A0B;&#x4ED3;&#x5E93;
git push origin v1.0
//&#x63D0;&#x4EA4;&#x672C;&#x5730;&#x6240;&#x6709;tag&#x5230;&#x8FDC;&#x7A0B;&#x4ED3;&#x5E93;
git push origin --tags
//&#x5220;&#x9664;&#x672C;&#x5730;tag
git tag -d v1.0
//&#x5220;&#x9664;&#x8FDC;&#x7A0B;tag
git push origin :refs/tags/v1.0
//&#x83B7;&#x53D6;&#x8FDC;&#x7A0B;&#x7248;&#x672C;
git fetch origin tag v1.0



//git-ci.yml&#x914D;&#x7F6E;
only:
  - tags
except:
  - branches
</code></pre><h4 id="&#x6D41;&#x6C34;&#x7EBF;&#x89E6;&#x53D1;">&#x6D41;&#x6C34;&#x7EBF;&#x89E6;&#x53D1;</h4>
<pre><code>only:
  - triggers

except:
  - triggers
</code></pre><h3 id="&#x955C;&#x50CF;&#x4F7F;&#x7528;">&#x955C;&#x50CF;&#x4F7F;&#x7528;</h3>
<p><code>image: node:16.15.1</code>&#x8868;&#x793A;&#x4F7F;&#x7528;nodejs 16.15.1&#x7248;&#x672C;&#x6700;&#x4E3A;&#x57FA;&#x7840;&#x955C;&#x50CF;&#xFF0C;<code>pipelines</code>&#x89E6;&#x53D1;&#x540E;&#x4F1A;pull Nodejs&#x7684;&#x955C;&#x50CF;&#xFF0C;<code>npm install</code>&#x3001;<code>npm run build</code>&#x3001;<code>npm run deploy</code>&#x7684;&#x4F7F;&#x7528;&#x9700;&#x8981;node&#x7684;&#x955C;&#x50CF;&#x73AF;&#x5883;&#x3002;</p>
<h3 id="&#x7F16;&#x5199;job">&#x7F16;&#x5199;job</h3>
<p><code>before_script</code>&#x4EE3;&#x8868;&#x662F;&#x6BCF;&#x4E2A;script&#x811A;&#x672C;&#x6267;&#x884C;&#x524D;&#x7684;&#x811A;&#x672C;&#xFF0C;</p>
<p><code>stage</code>&#x5B9A;&#x4E49;&#x7684;&#x662F;&#x9636;&#x6BB5;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;</p>
<pre><code># &#x9636;&#x6BB5;
stages:
  - install
  - init
  - build
  - deploy
</code></pre><p>&#x6267;&#x884C;&#x987A;&#x5E8F;&#x5C31;&#x662F; install &gt; init &gt; build &gt; deploy</p>
<pre><code># &#x6253;&#x5305;&#x9879;&#x76EE;
build:
  stage: build
  only:
    - dev-mguo
  tags:
    - docker
  script:
    - npm run build
  # &#x5C06;&#x6B64;&#x9636;&#x6BB5;&#x4EA7;&#x7269;&#x4F20;&#x9012;&#x81F3;&#x4E0B;&#x4E00;&#x9636;&#x6BB5;
  artifacts:
    paths:
      - build/
  # when: manual
</code></pre><p><code>build</code>&#x4EE3;&#x8868;&#x7684;&#x662F;job&#x7684;&#x540D;&#x5B57;</p>
<p><code>stage</code>&#x4EE3;&#x8868;&#x7684;&#x662F;&#x6267;&#x884C;&#x7684;&#x9636;&#x6BB5;</p>
<p><code>only</code>&#x4EE3;&#x8868;&#x7684;&#x662F;&#x5728;&#x4EC0;&#x4E48;&#x5206;&#x652F;&#x6765;&#x6267;&#x884C;</p>
<p><code>tags</code>&#x4EE3;&#x8868;&#x7684;&#x662F;&#x6267;&#x884C;&#x4F7F;&#x7528;&#x7684;<code>runner</code>&#x6807;&#x7B7E;</p>
<p><code>script</code>&#x4EE3;&#x8868;&#x7684;&#x662F;&#x6267;&#x884C;&#x7684;&#x811A;&#x672C;</p>
<p><code>artifacts</code>&#x4EE3;&#x8868;&#x6267;&#x884C;&#x7684;&#x9636;&#x6BB5;&#x7F13;&#x5B58;&#x6587;&#x4EF6;</p>
<p><code>cache</code>&#x4EE3;&#x8868;&#x7684;&#x662F;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x4E2D;&#x7F13;&#x5B58;&#x7684;&#x6587;&#x4EF6;</p>
<p><code>when: manual</code>&#x4EE3;&#x8868;&#x7684;&#x662F;&#x624B;&#x52A8;&#x89E6;&#x53D1;</p>
<ul>
<li><code>on_success</code> &#xFF1A;&#x53EA;&#x6709;&#x524D;&#x9762;&#x7684;&#x9636;&#x6BB5;&#x7684;&#x6240;&#x6709;&#x4F5C;&#x4E1A;&#x90FD;&#x6210;&#x529F;&#x65F6;&#x624D;&#x6267;&#x884C;&#xFF0C;&#x8FD9;&#x662F;&#x9ED8;&#x8BA4;&#x503C;&#x3002;</li>
<li><code>on_failure</code> &#xFF1A;&#x5F53;&#x524D;&#x9762;&#x9636;&#x6BB5;&#x7684;&#x4F5C;&#x4E1A;&#x81F3;&#x5C11;&#x6709;&#x4E00;&#x4E2A;&#x5931;&#x8D25;&#x65F6;&#x624D;&#x6267;&#x884C;&#x3002;</li>
<li><code>always</code> : &#x65E0;&#x8BBA;&#x524D;&#x9762;&#x7684;&#x4F5C;&#x4E1A;&#x662F;&#x5426;&#x6210;&#x529F;&#xFF0C;&#x4E00;&#x76F4;&#x6267;&#x884C;&#x672C;&#x4F5C;&#x4E1A;&#x3002;</li>
<li><code>manual</code> &#xFF1A;&#x624B;&#x52A8;&#x6267;&#x884C;&#x4F5C;&#x4E1A;&#xFF0C;&#x4F5C;&#x4E1A;&#x4E0D;&#x4F1A;&#x81EA;&#x52A8;&#x6267;&#x884C;&#xFF0C;&#x9700;&#x8981;&#x4EBA;&#x5DE5;&#x624B;&#x52A8;&#x70B9;&#x51FB;&#x542F;&#x52A8;&#x4F5C;&#x4E1A;&#x3002;</li>
<li><code>delayed</code> : &#x5EF6;&#x8FDF;&#x6267;&#x884C;&#x4F5C;&#x4E1A;&#xFF0C;&#x914D;&#x5408; <code>start_in</code> &#x5173;&#x952E;&#x5B57;&#x4E00;&#x8D77;&#x4F5C;&#x7528;&#xFF0C; <code>start_in</code> &#x8BBE;&#x7F6E;&#x7684;&#x503C;&#x5FC5;&#x987B;&#x5C0F;&#x4E8E;&#x6216;&#x7B49;&#x4E8E;1&#x5C0F;&#x65F6;&#xFF0C;<code>start_in</code> &#x8BBE;&#x7F6E;&#x7684;&#x503C;&#x793A;&#x4F8B;&#xFF1A; <code>10 seconds</code> &#x3001; <code>30 minutes</code> &#x3001; <code>1 hour</code> &#xFF0C;&#x524D;&#x9762;&#x7684;&#x4F5C;&#x4E1A;&#x7ED3;&#x675F;&#x65F6;&#x8BA1;&#x65F6;&#x5668;&#x9A6C;&#x4E0A;&#x5F00;&#x59CB;&#x8BA1;&#x65F6;&#x3002;</li>
</ul>
<p><img src="Users/gm/Library/Application%20Support/marktext/images/2022-06-29-18-04-48-image.png" alt=""></p>
<pre><code>&#x5176;&#x4E2D; cache &#x6307;&#x7684;&#x662F;&#x7F13;&#x5B58;, &#x5E38;&#x7528;&#x4E8E;&#x4F9D;&#x8D56;&#x5B89;&#x88C5;&#x4E2D;, &#x5982;&#x51E0;&#x4E2A;jobs&#x90FD;&#x9700;&#x8981;&#x5B89;&#x88C5;&#x76F8;&#x540C;&#x7684;&#x4F9D;&#x8D56;, &#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4F9D;&#x8D56;, &#x6B64;&#x65F6;&#x53EF;&#x4EE5;&#x52A0;&#x5FEB;&#x4F9D;&#x8D56;&#x7684;&#x5B89;&#x88C5;&#x8FDB;&#x5EA6;;
&#x5BF9;&#x4E8E;artifacts&#x5219;&#x662F;&#x5C06;&#x67D0;&#x4E2A;&#x5DE5;&#x4EF6;&#x4E0A;&#x4F20;&#x5230;GitLab&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#x6216;&#x540E;&#x7EED;&#x64CD;&#x4F5C;&#x4F7F;&#x7528;, &#x7531;&#x4E8E;&#x6BCF;&#x4E2A;job&#x542F;&#x52A8;&#x65F6;, &#x90FD;&#x4F1A;&#x81EA;&#x52A8;&#x5220;&#x9664;.gitignore&#x4E2D;&#x6307;&#x5B9A;&#x7684;&#x6587;&#x4EF6;, &#x56E0;&#x6B64;&#x5BF9;&#x4E8E;&#x4F9D;&#x8D56;&#x5B89;&#x88C5;&#x76EE;&#x5F55;, &#x5373;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;cache, &#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;artifacts.

&#x4E24;&#x4E2A;&#x4E3B;&#x8981;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x533A;&#x522B;:

cache&#x4E0D;&#x4E00;&#x5B9A;&#x547D;&#x4E2D;&#xFF0C;artifacts&#x80AF;&#x5B9A;&#x547D;&#x4E2D;, &#x80FD;&#x5426;&#x4F7F;&#x7528;cache&#x53D6;&#x51B3;&#x5F53;&#x5F53;&#x524D;&#x673A;&#x5668;&#x662F;&#x5426;&#x751F;&#x6210;&#x8FC7;cache, artifacts&#x5219;&#x6BCF;&#x6B21;&#x90FD;&#x4F1A;&#x4ECE;GitLab&#x4E0B;&#x8F7D;
&#x91CD;&#x65B0;&#x5B89;&#x88C5;&#x65F6;&#x56E0;&#x4E3A;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x7F13;&#x5B58;, &#x6240;&#x4EE5;&#x5F88;&#x6709;&#x53EF;&#x80FD;&#x4E0D;&#x662F;&#x6700;&#x65B0;&#x7684;
&#x7279;&#x522B;&#x662F;&#x5F00;&#x53D1;&#x73AF;&#x5883;, &#x5982;&#x679C;&#x6BCF;&#x6B21;&#x90FD;&#x5E0C;&#x671B;&#x4F7F;&#x7528;&#x6700;&#x65B0;&#x7684;&#x66F4;&#x65B0;, &#x5E94;&#x5F53;&#x5220;&#x9664;cache, &#x4F7F;&#x7528;artifacts, &#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x786E;&#x5B9A;&#x7684;&#x66F4;&#x65B0;
4.artifacts&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x90E8;&#x5206;, &#x4F1A;&#x81EA;&#x52A8;&#x751F;&#x6210;, &#x5E76;&#x53EF;&#x4EE5;&#x4F20;&#x5230;&#x4E0B;&#x9762;&#x7684;job&#x4E2D;&#x89E3;&#x538B;&#x4F7F;&#x7528;, &#x907F;&#x514D;&#x4E86;&#x91CD;&#x590D;&#x4F9D;&#x8D56;&#x5B89;&#x88C5;&#x7B49;&#x5DE5;&#x4F5C;
&#x5982;&#x679C;&#x4F7F;&#x7528;Docker&#x8FD0;&#x884C;Gitlab-Runner, cache&#x4F1A;&#x751F;&#x6210;&#x4E00;&#x4E9B;&#x4E34;&#x65F6;&#x5BB9;&#x5668;, &#x4E0D;&#x5BB9;&#x6613;&#x6E05;&#x7406;
artifacts&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x81EA;&#x52A8;&#x8FC7;&#x671F;&#x65F6;&#x95F4;, &#x8FC7;&#x671F;&#x81EA;&#x52A8;&#x5220;&#x9664;&#xFF0C;cache&#x4E0D;&#x4F1A;&#x81EA;&#x52A8;&#x6E05;&#x7406;
artifacts&#x4F1A;&#x5148;&#x4F20;&#x5230;GitLab&#x670D;&#x52A1;&#x5668;, &#x7136;&#x540E;&#x9700;&#x8981;&#x65F6;&#x518D;&#x91CD;&#x65B0;&#x4E0B;&#x8F7D;, &#x6240;&#x4EE5;&#x8FD9;&#x90E8;&#x5206;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;GitLab&#x4E0B;&#x8F7D;&#x548C;&#x6D4F;&#x89C8;
</code></pre><h2 id=""><img src="Users/gm/Library/Application%20Support/marktext/images/2022-06-29-18-05-41-image.png" alt=""></h2>
<pre><code>    &#x5230;&#x8FD9;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x505A;&#x597D;&#x4E86;&#x9879;&#x76EE;&#x7684; CI&#x6301;&#x7EED;&#x96C6;&#x6210;&#xFF0C;CD &#x6301;&#x7EED;&#x90E8;&#x7F72;&#x8FD8;&#x6CA1;&#x6709;&#x505A;&#xFF0C;&#x6700;&#x5E38;&#x7528;&#x7684;&#x662F;&#x5C06; build &#x540E;&#x7684;&#x9759;&#x6001;&#x6587;&#x4EF6;&#x653E;&#x5230;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x6216;&#x8005;&#x505A;&#x6210;Docker &#x955C;&#x50CF;&#xFF0C;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#x5728;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x3002;
</code></pre><h3 id="&#x9690;&#x79D8;&#x53D8;&#x91CF;&#x4F7F;&#x7528;">&#x9690;&#x79D8;&#x53D8;&#x91CF;&#x4F7F;&#x7528;</h3>
<p>&#x5728; .gitlab-ci.yml &#x4E2D;&#x4F7F;&#x7528;&#x4E00;&#x4E9B;&#x5BC6;&#x7801;&#x3001;&#x79C1;&#x94A5;&#xFF0C;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x65F6;&#x975E;&#x5E38;&#x4E0D;&#x5B89;&#x5168;&#x7684;&#x3002;&#x6781;&#x72D0;GitLab &#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x5728; CI/CD &#x4E2D;&#x5B89;&#x5168;&#x4F7F;&#x7528;&#x9690;&#x79D8;&#x53D8;&#x91CF;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x6DFB;&#x52A0;&#x53D8;&#x91CF;&#x540E;&#x5728; .gitlab-ci.yml &#x4E2D;&#x4F7F;&#x7528; <code>$+&#x53D8;&#x91CF;&#x540D;</code> &#x7684;&#x65B9;&#x5F0F;&#x6765;&#x4F7F;&#x7528;&#xFF0C;&#x5982;&#x955C;&#x50CF;&#x540D;&#x3001;&#x8FD0;&#x884C;&#x7684;&#x5BB9;&#x5668;&#x540D;&#x3001;&#x7528;&#x6237;&#x540D;&#x3001;&#x5BC6;&#x7801;&#x7B49;&#x3002;&#x5982;&#x4E0B;&#x56FE;&#x6DFB;&#x52A0;&#x53D8;&#x91CF;</p>
<p><img src="Users/gm/Library/Application%20Support/marktext/images/2022-06-29-18-09-55-image.png" alt=""></p>
<h2 id="&#x90E8;&#x7F72;&#x65B9;&#x5F0F;">&#x90E8;&#x7F72;&#x65B9;&#x5F0F;</h2>
<h3 id="docker&#x65B9;&#x5F0F;">docker&#x65B9;&#x5F0F;</h3>
<pre><code># &#x5B9A;&#x4E49;&#x6784;&#x5EFA;&#x955C;&#x50CF;
build-image:
  image: $DOCKER_IMG # &#x4F9D;&#x8D56;&#x7684;&#x57FA;&#x7840;&#x955C;&#x50CF;
  stage: build
  script:
    - docker login -u $HARBOR_USERNAME -p $HARBOR_PWD $HARBOR_URL # &#x767B;&#x5F55;&#x955C;&#x50CF;&#x4ED3;&#x5E93;
    - docker build -t $APP_IMAGE_NAME . # &#x6784;&#x5EFA;&#x955C;&#x50CF;
    - docker push $APP_IMAGE_NAME # &#x63A8;&#x9001;&#x955C;&#x50CF;
    - docker rmi $APP_IMAGE_NAME # &#x5220;&#x9664;&#x672C;&#x5730;&#x955C;&#x50CF;
  only:
    - master

deploy:
  image: $DOCKER_IMG
  stage: deploy
  script:
    # &#x5982;&#x679C;&#x6709;&#x5BB9;&#x5668;&#x540D;&#x4E3A;$APP_CONTAINER_NAME &#x7684;&#x5BB9;&#x5668;&#x5728;&#x8FD0;&#x884C;&#x5219;&#x5F3A;&#x884C;&#x4E0A;&#x5220;&#x9664;
    - if [ $(docker ps -aq --filter name=$APP_CONTAINER_NAME) ]; then docker rm -f $APP_CONTAINER_NAME; docker image rm -f $APP_IMAGE_NAME;fi

    # &#x767B;&#x5F55;&#x955C;&#x50CF;&#x4ED3;&#x5E93;
    - docker login -u $HARBOR_USERNAME -p $HARBOR_PWD $HARBOR_URL

    # &#x4F7F;&#x7528; 8001 &#x7AEF;&#x53E3;,&#x955C;&#x50CF;&#x540D;&#x4E3A;$APP_CONTAINER_NAME &#x7684;&#x540E;&#x53F0;&#x65B9;&#x5F0F; &#x8FD0;&#x884C;&#x4E00;&#x4E2A;&#x955C;&#x50CF;
    - docker run -d -p 8001:80 --name $APP_CONTAINER_NAME $APP_IMAGE_NAME
    - echo &apos;deploy product websit success&apos;
  only:
    - master
  when: manual # &#x624B;&#x52A8;&#x6267;&#x884C;,&#x9700;&#x8981;&#x70B9;&#x51FB;
</code></pre><h3 id="ssh&#x65B9;&#x5F0F;">ssh&#x65B9;&#x5F0F;</h3>
<p>Runner &#x8DD1;&#x5728;&#x673A;&#x5668; A&#xFF0C;&#x5E94;&#x7528;&#x90E8;&#x7F72;&#x5728;&#x673A;&#x5668; B&#xFF0C;&#x90A3;&#x4E48; Runner &#x5BF9;&#x524D;&#x7AEF;&#x9879;&#x76EE; build &#x4E4B;&#x540E;&#xFF0C;&#x600E;&#x6837;&#x5C06; build &#x540E;&#x7684;&#x9759;&#x6001;&#x6587;&#x4EF6;&#xFF0C;&#x4E0A;&#x4F20;&#x5230;&#x673A;&#x5668; B&#xFF1F;&#x5728;&#x673A;&#x5668; A &#x548C;&#x673A;&#x5668; B &#x4E4B;&#x95F4;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x514D;&#x5BC6;&#x767B;&#x5F55;&#xFF0C;&#x5728;&#x673A;&#x5668; A build &#x9879;&#x76EE;&#x4E4B;&#x540E;&#xFF0C;&#x9759;&#x9ED8;&#x5730;&#x8C03;&#x7528;&#x6307;&#x4EE4;&#x5C06;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x5230;&#x673A;&#x5668; B&#xFF0C;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x90E8;&#x7F72;&#x3002;</p>
<h4 id="&#x521B;&#x5EFA;-ssh-key&#x5E76;&#x4E0A;&#x4F20;">&#x521B;&#x5EFA; SSH key&#x5E76;&#x4E0A;&#x4F20;</h4>
<pre><code>ssh-keygen -t rsa -b 2048 -C &quot;email@example.com&quot;
scp -r id_rsa.pub root@1.2.3.4:/root/.ssh/authorized_keys
</code></pre><p>&#x5C06;&#x516C;&#x94A5; id_rsa.pub &#x4E0A;&#x4F20;&#x5230;&#x670D;&#x52A1;&#x5668; authorized_keys &#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x7B2C;&#x4E00;&#x6B21;&#x4F1A;&#x4FDD;&#x5B58; known hosts&#xFF0C;&#x5E76;&#x4E14;&#x8981;&#x6C42;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#xFF0C;&#x4E0A;&#x4F20;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x518D;&#x6B21;&#x6267;&#x884C;&#x4E0A;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#x4E86;&#xFF0C;&#x514D;&#x5BC6;&#x6784;&#x5EFA;&#x6210;&#x529F;&#xFF0C;&#x5C31;&#x8981;&#x914D;&#x7F6E; CI/CD &#x4E86;</p>
<p>&#x521B;&#x5EFA;&#x4E00;&#x4E2A; SSH_PRIVATE_KEY &#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x5C06;&#x79D8;&#x94A5;&#x590D;&#x5236;&#x8FDB;&#x53BB;&#x3002;&#x63A5;&#x7740;&#x4FEE;&#x6539;.gitlab-ci.yml &#x6587;&#x4EF6;</p>
<pre><code>deploy-server:
  stage: deploy
  before_script:
    # &#x5982;&#x679C;&#x6CA1;&#x6709;&#x5B89;&#x88C5; `ssh-agent`,&#x5C31;&#x5B89;&#x88C5;&#xFF0C;&#x57FA;&#x4E8E; RPM &#x7684;&#x955C;&#x50CF;&#x53EF;&#x4EE5;&#x5C06; apt-get &#x66FF;&#x6362;&#x4E3A; yum
    - &apos;command -v ssh-agent &gt;/dev/null || ( apt-get update -y &amp;&amp; apt-get install openssh-client -y )&apos;
    - eval $(ssh-agent -s) # &#x8FD0;&#x884C; ssh-agent
    - echo &quot;$SSH_PRIVATE_KEY&quot; | tr -d &apos;\r&apos; | ssh-add -

    # &#x521B;&#x5EFA;&#x5BF9;&#x5E94;&#x7684;&#x76EE;&#x5F55;&#x5E76;&#x7ED9;&#x76F8;&#x5E94;&#x7684;&#x6743;&#x9650;
    - mkdir -p ~/.ssh
    - chmod 700 ~/.ssh

    - ssh-keyscan ipaddress &gt;&gt; ~/.ssh/known_hosts
    - chmod 644 ~/.ssh/known_hosts
  script:
    - npm run build
    - scp -r dist/* root@ipaddress:/usr/local/www/hello-vue
  only:
    - master
</code></pre><p>&#x4EE3;&#x7801;&#x89E3;&#x91CA;&#xFF1A;</p>
<p>&#x4EFB;&#x52A1;&#x662F;&#x5728; Docker &#x5BB9;&#x5668;&#x4E2D;&#x8FD0;&#x884C;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x8981;&#x4F7F;&#x7528; ssh &#x5FC5;&#x987B;&#x8981;&#x786E;&#x4FDD;&#x5DF2;&#x7ECF;&#x5B89;&#x88C5;&#x5FC5;&#x8981;&#x7684;&#x8F6F;&#x4EF6;&#x3002;
&#x5982;&#x679C;&#x6CA1;&#x6709;&#x5B89;&#x88C5; ssh-agent&#xFF0C;&#x5C31;&#x5B89;&#x88C5;&#xFF0C;&#x57FA;&#x4E8E; RPM &#x7684;&#x955C;&#x50CF;&#x53EF;&#x4EE5;&#x5C06; apt-get &#x66FF;&#x6362;&#x4E3A; yum&#x3002;
&#x6CE8;&#x610F;&#x76EE;&#x5F55; /usr/local/www/hello-vue &#x9700;&#x8981;&#x914D;&#x7F6E;&#x4E86; Nginx &#x6620;&#x5C04;&#x624D;&#x80FD;&#x591F;&#x8BBF;&#x95EE;&#x3002;</p>
<h2 id="trigger&#x89E6;&#x53D1;">trigger&#x89E6;&#x53D1;</h2>
<table>
<thead>
<tr>
<th>Token</th>
<th>&#x63CF;&#x8FF0;</th>
</tr>
</thead>
<tbody>
<tr>
<td>xxxxxxxxxxxxxxx</td>
<td>cicd-test</td>
</tr>
</tbody>
</table>
<h3 id="use-curl">use cURL</h3>
<pre><code>curl -X POST \
     -F token=TOKEN \
     -F ref=REF_NAME \
     http://gitlab.example.com/api/v4/projects/projectId/trigger/pipeline


curl -X POST \
     -F token=TOKEN \
     -F ref=dev-mguo \
     http://gitlab.example.com/api/v4/projects/projectId/trigger/pipeline
</code></pre><h3 id="use-gitlab-ciyml">use .gitlab-ci.yml</h3>
<pre><code>script:
  - &quot;curl -X POST -F token=TOKEN -F ref=REF_NAME http://gitlab.example.com/api/v4/projects/370/trigger/pipeline&quot;

//&#x6DFB;&#x52A0;&#x53D8;&#x91CF;
curl -X POST \
     -F token=TOKEN \
     -F &quot;ref=REF_NAME&quot; \
     -F &quot;variables[RUN_NIGHTLY_BUILD]=true&quot; \
     http://gitlab.example.com/api/v4/projects/370/trigger/pipeline
</code></pre><h3 id="use-webhook">Use webhook</h3>
<pre><code>http://gitlab.example.com/api/v4/projects/370/ref/REF_NAME/trigger/pipeline?token=TOKEN


http://gitlab.example.com/api/v4/projects/370/ref/dev-mguo/trigger/pipeline?token=TOKEN

//&#x6DFB;&#x52A0;&#x53D8;&#x91CF;
http://gitlab.example.com/api/v4/projects/370/ref/REF_NAME/trigger/pipeline?token=TOKEN&amp;variables[RUN_NIGHTLY_BUILD]=true
</code></pre><h4 id="&#x5B50;&#x6A21;&#x5757;&#x7B56;&#x7565;git-submodule-strategy">&#x5B50;&#x6A21;&#x5757;&#x7B56;&#x7565;Git submodule strategy</h4>
<ul>
<li><code>GIT_SUBMODULE_STRATEGY</code> &#x7C7B;&#x4F3C;&#x4E8E; <code>GIT_STRATEGY</code> &#xFF0C;&#x5F53;&#x4F60;&#x7684;&#x9879;&#x76EE;&#x9700;&#x8981;&#x5305;&#x542B;&#x522B;&#x7684;&#x9879;&#x76EE;&#x4EE3;&#x7801;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x522B;&#x7684;&#x9879;&#x76EE;&#x4F5C;&#x4E3A;&#x4F60;&#x7684;&#x9879;&#x76EE;&#x7684;&#x5B50;&#x6A21;&#x5757;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>GIT_SUBMODULE_STRATEGY</code> &#x3002;</li>
<li><code>GIT_SUBMODULE_STRATEGY</code> &#x9ED8;&#x8BA4;&#x53D6;&#x503C; <code>none</code> &#xFF0C;&#x5373;&#x62C9;&#x53D6;&#x4EE3;&#x7801;&#x65F6;&#xFF0C;&#x5B50;&#x6A21;&#x5757;&#x4E0D;&#x4F1A;&#x88AB;&#x5F15;&#x5165;&#x3002;</li>
<li><code>GIT_SUBMODULE_STRATEGY</code> &#x53EF;&#x53D6;&#x503C; <code>normal</code> &#xFF0C;&#x610F;&#x5473;&#x7740;&#x5728;&#x53EA;&#x6709;&#x9876;&#x7EA7;&#x5B50;&#x6A21;&#x5757;&#x4F1A;&#x88AB;&#x5F15;&#x5165;&#x3002;</li>
<li><code>GIT_SUBMODULE_STRATEGY</code> &#x53EF;&#x53D6;&#x503C; <code>recursive</code> &#xFF0C;&#x9012;&#x5F52;&#x7684;&#x610F;&#x601D;&#xFF0C;&#x610F;&#x5473;&#x7740;&#x6240;&#x6709;&#x7EA7;&#x5B50;&#x6A21;&#x5757;&#x4F1A;&#x88AB;&#x5F15;&#x5165;&#x3002;</li>
</ul>
<p>&#x5B50;&#x6A21;&#x5757;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x5728; <code>.gitmodules</code> &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x4E24;&#x4E2A;&#x793A;&#x4F8B;&#xFF1A;</p>
<p>&#x573A;&#x666F;&#xFF1A;</p>
<ul>
<li>&#x4F60;&#x7684;&#x9879;&#x76EE;&#x5730;&#x5740;&#xFF1A; <code>https://gitlab.com/secret-group/my-project</code> &#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>git clone git@gitlab.com:secret-group/my-project.git</code> &#x68C0;&#x51FA;&#x4EE3;&#x7801;&#x3002;</li>
<li>&#x4F60;&#x7684;&#x9879;&#x76EE;&#x4F9D;&#x8D56; <code>https://gitlab.com/group/project</code> &#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5C06;&#x8FD9;&#x4E2A;&#x6A21;&#x5757;&#x4F5C;&#x4E3A;&#x9879;&#x76EE;&#x7684;&#x5B50;&#x6A21;&#x5757;&#x3002;</li>
</ul>
<p>&#x5B50;&#x6A21;&#x5757;&#x4E0E;&#x672C;&#x9879;&#x76EE;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x4E0A;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x76F8;&#x5BF9;&#x5F15;&#x7528;&#xFF1A;</p>
<table>
<thead>
<tr>
<th>1<br>2<br>3</th>
<th>[submodule &quot;project&quot;]<br> path = project<br> url = ../../group/project.git</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<p>&#x5B50;&#x6A21;&#x5757;&#x4E0E;&#x672C;&#x9879;&#x76EE;&#x4E0D;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x4E0A;&#xFF0C;&#x4F7F;&#x7528;&#x76F8;&#x5BF9;&#x7EDD;&#x5BF9;URL&#xFF1A;</p>
<table>
<thead>
<tr>
<th>1<br>2<br>3</th>
<th>[submodule &quot;project-x&quot;]<br> path = project-x<br> url = <a href="https://gitserver.com/group/project-x.git" target="_blank">https://gitserver.com/group/project-x.git</a></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<p>&#x8BE6;&#x7EC6;&#x53EF;&#x53C2;&#x8003; <a href="https://docs.gitlab.com/ce/ci/git_submodules.html" target="_blank">Using Git submodules with GitLab CI</a></p>
<h2 id="release&#x529F;&#x80FD;">Release&#x529F;&#x80FD;</h2>
<p>&#x53C2;&#x8003;&#x94FE;&#x63A5;&#xFF1A;<a href="https://docs.gitlab.com/ee/api/releases/index.html" target="_blank">Releases API | GitLab</a></p>
<p><a href="https://blog.csdn.net/a112626290/article/details/105404318" target="_blank">[gitlab] release&#x529F;&#x80FD;</a></p>
<pre><code>//Create a release  POST /projects/:id/releases
curl --header &apos;Content-Type: application/json&apos; --header &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; \
     --data &apos;{ &quot;name&quot;: &quot;New release&quot;, &quot;tag_name&quot;: &quot;v0.3&quot;, &quot;description&quot;: &quot;Super nice release&quot;, &quot;milestones&quot;: [&quot;v1.0&quot;, &quot;v1.0-rc&quot;], &quot;assets&quot;: { &quot;links&quot;: [{ &quot;name&quot;: &quot;hoge&quot;, &quot;url&quot;: &quot;https://google.com&quot;, &quot;filepath&quot;: &quot;/binaries/linux-amd64&quot;, &quot;link_type&quot;:&quot;other&quot; }] } }&apos; \
     --request POST &quot;https://gitlab.example.com/api/v4/projects/24/releases&quot;

//&#x7B80;&#x5355;&#x547D;&#x4EE4;
curl --header &apos;Content-Type: application/json&apos; --header &quot;PRIVATE-TOKEN: XXXXXXXXXXXXX&quot; --data &apos;{ &quot;name&quot;: &quot;&apos;release&#x540D;&#x79F0;&apos;&quot;, &quot;tag_name&quot;: &quot;&apos;&#x6807;&#x7B7E;&#x540D;&apos;&quot;, &quot;ref&quot;:&quot;&apos;&#x6807;&#x7B7E;&#x540D;&apos;&quot; ,&quot;description&quot;: &quot;&apos;&#x63CF;&#x8FF0;&#x4FE1;&#x606F;&apos;&quot; }&apos; --request POST http://ip&#x5730;&#x5740;/api/v4/projects/&#x5DE5;&#x7A0B;id/releases

//PRIVATE-TOKEN
//projectId
curl --header &apos;Content-Type: application/json&apos; --header &quot;PRIVATE-TOKEN: XXXXXXXXXXX&quot; --data &apos;{ &quot;name&quot;: &quot;&apos;release&#x540D;&#x79F0;&apos;&quot;, &quot;tag_name&quot;: &quot;&apos;&#x6807;&#x7B7E;&#x540D;&apos;&quot;, &quot;ref&quot;:&quot;&apos;&#x6807;&#x7B7E;&#x540D;&apos;&quot; ,&quot;description&quot;: &quot;&apos;&#x63CF;&#x8FF0;&#x4FE1;&#x606F;&apos;&quot; }&apos; --request POST http://gitlab.example.com/api/v4/projects/&#x5DE5;&#x7A0B;id/releases
</code></pre><h3 id="private-token">PRIVATE-TOKEN</h3>
<p>&#x83B7;&#x53D6;&#x65B9;&#x5F0F; ,&#x53C2;&#x8003;<code>TOKEN</code></p>
<p><img src="Users/gm/Library/Application%20Support/marktext/images/2022-06-30-14-07-20-image.png" alt=""></p>
<h3 id="projectid">projectId</h3>
<p>&#x6BCF;&#x4E2A;gitlab&#x4E2D;&#x7684;&#x9879;&#x76EE;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x552F;&#x4E00;&#x8BC6;&#x522B;&#x53F7;&#xFF0C;&#x6211;&#x4EEC;&#x79F0;&#x4E4B;&#x4E3A;project id</p>
<p><img src="Users/gm/Library/Application%20Support/marktext/images/2022-06-30-14-08-21-image.png" alt=""></p>
<h3 id="tag">Tag</h3>
<p>&#x4E2D;&#x6587;&#x7FFB;&#x8BD1;&#x4E3A;&#x6807;&#x7B7E;&#x3002;&#x67D0;&#x4E9B;&#x7A0B;&#x5EA6;&#x4E0A;&#x9762;&#xFF0C;tag&#x548C;release&#x4F60;&#x90FD;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x662F;&#x5FEB;&#x7167;&#x7684;&#x6982;&#x5FF5;&#x3002;
release&#x57FA;&#x4E8E;tag&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x5148;&#x6253;&#x6807;&#x7B7E;&#xFF1A;</p>
<p><img src="https://img-blog.csdnimg.cn/20200409102623650.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ExMTI2MjYyOTA=,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<p>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x5176;&#x4ED6;&#x64CD;&#x4F5C;&#xFF0C;&#x751F;&#x6210;release&#x5C31;&#x662F;&#x628A;&#x67D0;&#x4E2A;&#x7248;&#x672C;&#x7275;&#x51FA;&#x6765;&#xFF0C;&#x91CC;&#x9762;&#x90FD;&#x662F;&#x8BE5;&#x7248;&#x672C;&#x7684;&#x6E90;&#x7801;&#xFF0C;&#x5C06;&#x4F1A;&#x751F;&#x6210;4&#x79CD;&#x6587;&#x4EF6;:  <code>zip</code>, <code>tar.gz</code>, <code>tar.bz2</code> &#x548C; <code>tar</code></p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>integer/string</td>
<td>yes</td>
<td>The ID or <a href="https://docs.gitlab.com/ee/api/index.html#namespaced-path-encoding" target="_blank">URL-encoded path of the project</a>.</td>
</tr>
<tr>
<td><code>name</code></td>
<td>string</td>
<td>no</td>
<td>The release name.</td>
</tr>
<tr>
<td><code>tag_name</code></td>
<td>string</td>
<td>yes</td>
<td>The tag where the release is created from.</td>
</tr>
<tr>
<td><code>tag_message</code></td>
<td>string</td>
<td>no</td>
<td>Message to use if creating a new annotated tag.</td>
</tr>
<tr>
<td><code>description</code></td>
<td>string</td>
<td>no</td>
<td>The description of the release. You can use <a href="https://docs.gitlab.com/ee/user/markdown.html" target="_blank">Markdown</a>.</td>
</tr>
<tr>
<td><code>ref</code></td>
<td>string</td>
<td>yes, if <code>tag_name</code> doesn&#x2019;t exist</td>
<td>If a tag specified in <code>tag_name</code> doesn&#x2019;t exist, the release is created from <code>ref</code> and tagged with <code>tag_name</code>. It can be a commit SHA, another tag name, or a branch name.</td>
</tr>
<tr>
<td><code>milestones</code></td>
<td>array of string</td>
<td>no</td>
<td>The title of each milestone the release is associated with. <a href="https://about.gitlab.com/pricing/" target="_blank">GitLab Premium</a> customers can specify group milestones.</td>
</tr>
<tr>
<td><code>assets:links</code></td>
<td>array of hash</td>
<td>no</td>
<td>An array of assets links.</td>
</tr>
<tr>
<td><code>assets:links:name</code></td>
<td>string</td>
<td>required by: <code>assets:links</code></td>
<td>The name of the link. Link names must be unique within the release.</td>
</tr>
<tr>
<td><code>assets:links:url</code></td>
<td>string</td>
<td>required by: <code>assets:links</code></td>
<td>The URL of the link. Link URLs must be unique within the release.</td>
</tr>
<tr>
<td><code>assets:links:filepath</code></td>
<td>string</td>
<td>no</td>
<td>Optional path for a <a href="https://docs.gitlab.com/ee/user/project/releases/index.html#permanent-links-to-release-assets" target="_blank">Direct Asset link</a>.</td>
</tr>
<tr>
<td><code>assets:links:link_type</code></td>
<td>string</td>
<td>no</td>
<td>The type of the link: <code>other</code>, <code>runbook</code>, <code>image</code>, <code>package</code>. Defaults to <code>other</code>.</td>
</tr>
<tr>
<td><code>released_at</code></td>
<td>datetime</td>
<td>no</td>
<td>The date when the release is/was ready. Defaults to the current time. Expected in ISO 8601 format (<code>2019-03-15T08:00:00Z</code>).</td>
</tr>
</tbody>
</table>
<h2 id="&#x95EE;&#x9898;&#x6C47;&#x603B;">&#x95EE;&#x9898;&#x6C47;&#x603B;</h2>
<p>1.python</p>
<p>node&#x955C;&#x50CF;&#x7248;&#x672C;&#x95EE;&#x9898; image: node:15.16.1</p>
<p><img src="Users/gm/Library/Application%20Support/marktext/images/2022-06-24-16-01-39-image.png" alt=""></p>
<p>2.npm</p>
<p>&#x9700;&#x8981;&#x5B89;&#x88C5;node&#x955C;&#x50CF; image: node:15.16.1</p>
<p><img src="Users/gm/Library/Application%20Support/marktext/images/2022-06-24-16-03-18-image.png" alt=""></p>
<p><a href="https://www.cnblogs.com/bafeiyu/p/12538861.html" target="_blank">gitlab-runner&#x7684;&#x65E0;&#x6743;&#x9650;&#x95EE;&#x9898; - &#x82AD;&#x83F2;&#x96E8; - &#x535A;&#x5BA2;&#x56ED;</a></p>
<pre><code>ps aux|grep gitlab-runner  #&#x67E5;&#x770B;&#x5F53;&#x524D;runner&#x7528;&#x6237;

sudo gitlab-runner uninstall  #&#x5220;&#x9664;gitlab-runner

gitlab-runner install --working-directory /home/gitlab-runner --user root   #&#x5B89;&#x88C5;&#x5E76;&#x8BBE;&#x7F6E;--user(&#x4F8B;&#x5982;&#x6211;&#x60F3;&#x8BBE;&#x7F6E;&#x4E3A;root)

sudo service gitlab-runner restart  #&#x91CD;&#x542F;gitlab-runner

ps aux|grep gitlab-runner #&#x518D;&#x6B21;&#x6267;&#x884C;&#x4F1A;&#x53D1;&#x73B0;--user&#x7684;&#x7528;&#x6237;&#x540D;&#x5DF2;&#x7ECF;&#x66F4;&#x6362;&#x6210;root&#x4E86;
</code></pre><ol>
<li><p>fatal: could not read Username for &apos;<a href="https://gitserver.com/" target="_blank">https://gitserver.com/</a> &apos;: No such device or address</p>
<p>&#x4FEE;&#x6539;&#x6210;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#xFF08;&#x4E0D;&#x77E5;&#x9053;&#x4E3A;&#x5565;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;&#x4F1A;&#x51FA;&#x95EE;&#x9898;&#xFF09;</p>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF1A;<a href="https://blog.csdn.net/wangjiang_qianmo/article/details/122691224" target="_blank">Gitlab CI &#x62C9;&#x53D6; submodules</a></p>
</li>
<li><p>&#x4F7F;&#x7528;yarn&#x62A5;&#x9519;</p>
<p>&#x5C1D;&#x8BD5;&#x5220;&#x9664; <code>yarn.lock</code>
&#x5C3D;&#x91CF;&#x4F7F;&#x7528;&#x540C;&#x4E00;&#x4E2A;&#x6E90;</p>
<p><code>yarn config set strict-ssl false</code></p>
<p><code>yarn config set registry https://registry.npmjs.org</code></p>
<p>&#x94FE;&#x63A5;&#xFF1A;</p>
</li>
</ol>
<p>5.docker&#x5BB9;&#x5668;&#x65F6;&#x95F4;&#x6233;&#x4F7F;&#x7528;&#x4E0E;&#x672C;&#x5730;&#x4E0D;&#x540C;&#x95EE;&#x9898;</p>
<pre><code>docker cp /etc/localtime &lt;container_id&gt;:/etc/
</code></pre><h2 id="&#x524D;&#x7AEF;&#x9879;&#x76EE;-cicd-&#x6700;&#x4F73;&#x4E1A;&#x52A1;&#x914D;&#x7F6E;&#x601D;&#x8DEF;">&#x524D;&#x7AEF;&#x9879;&#x76EE; CI/CD &#x6700;&#x4F73;&#x4E1A;&#x52A1;&#x914D;&#x7F6E;&#x601D;&#x8DEF;</h2>
<p>&#x4E00;&#x4E2A;&#x597D;&#x7684; CI/CD &#x6D41;&#x7A0B;&#xFF0C;&#x5E94;&#x8BE5;&#x5305;&#x542B;&#x4EE5;&#x4E0B;&#x51E0;&#x70B9;</p>
<ul>
<li>&#x6743;&#x9650;&#x53EF;&#x63A7;</li>
<li>&#x7F13;&#x5B58;&#x4F7F;&#x7528;&#x5F97;&#x5F53;</li>
<li>&#x5206;&#x652F;&#x4F5C;&#x7528;&#x660E;&#x786E;</li>
<li>&#x6839;&#x636E; tag &#x521B;&#x5EFA;&#x7A33;&#x5B9A;&#x7684; release</li>
<li>&#x6781;&#x72D0;GitLab Runner &#x53EF;&#x4F38;&#x7F29;</li>
<li>&#x6D41;&#x6C34;&#x7EBF;&#x5F02;&#x5E38;&#x591A;&#x6E20;&#x9053;&#x901A;&#x77E5;</li>
<li>&#x652F;&#x6301;&#x591A;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x4E00;&#x952E;&#x540C;&#x6B65;&#x90E8;&#x7F72;</li>
<li>&#x9690;&#x79D8;&#x4FE1;&#x606F;&#x4F7F;&#x7528;&#x58F0;&#x660E;&#x53D8;&#x91CF;</li>
<li>&#x4F7F;&#x7528;&#x955C;&#x50CF;&#x65F6;&#x8981;&#x914D;&#x7F6E; .dockerignore</li>
</ul>
<p>&#x6743;&#x9650;&#x53EF;&#x63A7;&#x662F;&#x6307;&#x53D1;&#x5E03;&#x6B63;&#x5F0F;&#x73AF;&#x5883;&#xFF0C;&#x6216;&#x8005;&#x9884;&#x53D1;&#x5E03;&#x73AF;&#x5883;&#x53EA;&#x6709;&#x6307;&#x5B9A;&#x7684;&#x4EBA;&#x624D;&#x80FD;&#x53D1;&#x5E03;&#xFF0C;&#x5408;&#x5E76;&#x4EE3;&#x7801;&#x5FC5;&#x987B;&#x8981;&#x7ECF;&#x8FC7; CI &#x9A8C;&#x8BC1;&#x540E;&#x624D;&#x80FD;&#x5408;&#x5E76;&#x3002;</p>
<p>&#x7F13;&#x5B58;&#x4F7F;&#x7528;&#x5F97;&#x5F53;&#xFF0C;&#x53EF;&#x4EE5;&#x52A0;&#x5FEB;&#x6D41;&#x6C34;&#x7EBF;&#x7684;&#x6784;&#x5EFA;&#xFF0C;&#x4E5F;&#x4F7F;&#x7684;&#x53D1;&#x5E03;&#x6D41;&#x7A0B;&#x66F4;&#x52A0;&#x987A;&#x7545;&#xFF0C;&#x7F13;&#x5B58;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7B2C;&#x4E09;&#x65B9;&#x7684;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x672C;&#x5730;&#xFF0C;&#x53E6;&#x5916;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x7F13;&#x5B58;&#x7684;&#x5220;&#x9664;&#x7B56;&#x7565;&#xFF0C;&#x4E0D;&#x7136;&#x4E00;&#x76F4;&#x589E;&#x52A0;&#x7F13;&#x5B58;&#x673A;&#x5668;&#x4F1A;&#x7206;&#x6389;&#x7684;&#x3002;&#x7F13;&#x5B58;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5355;&#x4E2A;&#x6587;&#x4EF6;&#x7684; hash &#x503C;&#x6765;&#x7F13;&#x5B58;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7F13;&#x5B58;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;&#xFF0C;&#x5206;&#x652F;&#x4F5C;&#x7528;&#x660E;&#x786E;&#x4E4B;&#x540E;&#x624D;&#x80FD;&#x89C4;&#x5212;&#x5206;&#x652F;&#x7684;&#x53D1;&#x5E03;&#x6D41;&#x7A0B;&#xFF0C;&#x6709;&#x4E9B;&#x5206;&#x652F;&#x53EA;&#x80FD;&#x53D1;&#x5E03;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#xFF0C;&#x6709;&#x4E9B;&#x5206;&#x652F;&#x53EA;&#x80FD;&#x53D1;&#x5E03; test &#x73AF;&#x5883;&#xFF0C;&#x800C;&#x4E14;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x5206;&#x652F;&#x624D;&#x80FD;&#x53D1;&#x5E03;&#x6B63;&#x5F0F;&#x73AF;&#x5883;&#x3002;</p>
<p>&#x4E00;&#x4E2A;&#x7248;&#x672C;&#x53D1;&#x5E03;&#x540E;&#x9700;&#x8981;&#x7ED9;&#x4EE3;&#x7801;&#x7684;&#x6253;&#x4E00;&#x4E2A; tag&#xFF0C;&#x6807;&#x6CE8;&#x589E;&#x52A0;&#x4E86;&#x90A3;&#x4E9B;&#x529F;&#x80FD;&#xFF0C;&#x4FEE;&#x590D;&#x4E86;&#x90A3;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x505A;&#x4E86;&#x90A3;&#x4E9B;&#x4F18;&#x5316;&#xFF0C;&#x7136;&#x540E;&#x53D1;&#x5E03;&#x4E00;&#x4E2A; release&#x3002;&#x8FD9;&#x90E8;&#x5206;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; CI/CD &#x81EA;&#x52A8;&#x6784;&#x5EFA;&#xFF0C;&#x6D41;&#x6C34;&#x7EBF;&#x5F02;&#x5E38;&#x591A;&#x6E20;&#x9053;&#x901A;&#x77E5;&#x662F;&#x6307;&#xFF0C;&#x53D1;&#x5E03;&#x6216;&#x6784;&#x5EFA;&#x8FC7;&#x7A0B;&#x4E2D;&#x51FA;&#x9519;&#x4E86;&#xFF0C;&#x8981;&#x80FD;&#x53CA;&#x65F6;&#x8BA9;&#x4EBA;&#x53CA;&#x65F6;&#x611F;&#x77E5;&#xFF0C;&#x5FEB;&#x901F;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#xFF0C;&#x4E00;&#x4E2A;&#x6D41;&#x6C34;&#x7EBF;&#x6784;&#x5EFA;&#x6709;&#x7684;&#x9700;&#x8981; 10 &#x5206;&#x949F;&#xFF0C;&#x4E0D;&#x53EF;&#x80FD;&#x6BCF;&#x6B21;&#x90FD;&#x8981;&#x4E00;&#x76F4;&#x7B49;&#x5728;&#x54EA;&#x91CC;&#xFF0C;&#x6240;&#x6709;&#x53EF;&#x4EE5;&#x63A5;&#x5165;&#x9489;&#x9489;&#x901A;&#x77E5;&#x3001;&#x90AE;&#x4EF6;&#x901A;&#x77E5;&#xFF0C;&#x6216;&#x63A5;&#x5165;&#x7B2C;&#x4E09;&#x65B9;&#x5E94;&#x7528;&#x901A;&#x77E5;&#x3002;</p>
<p>&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x6D41;&#x884C;&#x4F7F; CI/CD &#x8FCE;&#x6765;&#x4E86;&#x66F4;&#x5927;&#x7684;&#x6311;&#x6218;&#xFF0C;&#x76EE;&#x524D; &#x6781;&#x72D0;GitLab &#x5DF2;&#x7ECF;&#x652F;&#x6301;&#x4E86;&#x591A;&#x6D41;&#x6C34;&#x7EBF;&#x6784;&#x5EFA;&#xFF0C;&#x65B9;&#x4FBF;&#x4E00;&#x6B21;&#x7248;&#x672C;&#x540C;&#x65F6;&#x53D1;&#x5E03;&#x591A;&#x4E2A;&#x5E94;&#x7528;&#xFF0C;&#x907F;&#x514D;&#x6709;&#x7684;&#x5E94;&#x7528;&#x4E22;&#x5931;&#x3002;&#x4F7F;&#x7528;.dockerignore &#x5C06;&#x4E0D;&#x9700;&#x8981;&#x7684;&#x6587;&#x4EF6;&#x5728;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#x65F6;&#x5FFD;&#x7565;&#xFF0C;&#x4EE5;&#x52A0;&#x5FEB;&#x6784;&#x5EFA;&#x901F;&#x5EA6;&#x3002;</p>
<h2 id="&#x9884;&#x5B9A;&#x4E49;&#x53D8;&#x91CF;">&#x9884;&#x5B9A;&#x4E49;&#x53D8;&#x91CF;</h2>
<p>There are also <a href="https://docs.gitlab.com/ee/user/project/clusters/index.html#deployment-variables" target="_blank">Kubernetes-specific deployment variables</a>.</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>GitLab</th>
<th>Runner</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CHAT_CHANNEL</code></td>
<td>10.6</td>
<td>all</td>
<td>The Source chat channel that triggered the <a href="https://docs.gitlab.com/ee/ci/chatops/index.html" target="_blank">ChatOps</a> command.</td>
</tr>
<tr>
<td><code>CHAT_INPUT</code></td>
<td>10.6</td>
<td>all</td>
<td>The additional arguments passed with the <a href="https://docs.gitlab.com/ee/ci/chatops/index.html" target="_blank">ChatOps</a> command.</td>
</tr>
<tr>
<td><code>CI</code></td>
<td>all</td>
<td>0.4</td>
<td>Available for all jobs executed in CI/CD. <code>true</code> when available.</td>
</tr>
<tr>
<td><code>CI_API_V4_URL</code></td>
<td>11.7</td>
<td>all</td>
<td>The GitLab API v4 root URL.</td>
</tr>
<tr>
<td><code>CI_BUILDS_DIR</code></td>
<td>all</td>
<td>11.10</td>
<td>The top-level directory where builds are executed.</td>
</tr>
<tr>
<td><code>CI_COMMIT_BEFORE_SHA</code></td>
<td>11.2</td>
<td>all</td>
<td>The previous latest commit present on a branch. Is always <code>0000000000000000000000000000000000000000</code> in pipelines for merge requests.</td>
</tr>
<tr>
<td><code>CI_COMMIT_BRANCH</code></td>
<td>12.6</td>
<td>0.5</td>
<td>The commit branch name. Available in branch pipelines, including pipelines for the default branch. Not available in merge request pipelines or tag pipelines.</td>
</tr>
<tr>
<td><code>CI_COMMIT_DESCRIPTION</code></td>
<td>10.8</td>
<td>all</td>
<td>The description of the commit. If the title is shorter than 100 characters, the message without the first line.</td>
</tr>
<tr>
<td><code>CI_COMMIT_MESSAGE</code></td>
<td>10.8</td>
<td>all</td>
<td>&#x63D0;&#x4EA4;message&#x3002;</td>
</tr>
<tr>
<td><code>CI_COMMIT_REF_NAME</code></td>
<td>9.0</td>
<td>all</td>
<td>branch or tag&#x540D;&#x79F0;</td>
</tr>
<tr>
<td><code>CI_COMMIT_REF_PROTECTED</code></td>
<td>11.11</td>
<td>all</td>
<td><code>true</code> if the job is running for a protected reference.</td>
</tr>
<tr>
<td><code>CI_COMMIT_REF_SLUG</code></td>
<td>9.0</td>
<td>all</td>
<td><code>CI_COMMIT_REF_NAME</code> in lowercase, shortened to 63 bytes, and with everything except <code>0-9</code> and <code>a-z</code> replaced with <code>-</code>. No leading / trailing <code>-</code>. Use in URLs, host names and domain names.</td>
</tr>
<tr>
<td><code>CI_COMMIT_SHA</code></td>
<td>9.0</td>
<td>all</td>
<td>&#x63D0;&#x4EA4;version</td>
</tr>
<tr>
<td><code>CI_COMMIT_SHORT_SHA</code></td>
<td>11.7</td>
<td>all</td>
<td><code>CI_COMMIT_SHA</code> &#x524D;8&#x5B57;&#x7B26;</td>
</tr>
<tr>
<td><code>CI_COMMIT_TAG</code></td>
<td>9.0</td>
<td>0.5</td>
<td>The commit tag name. Available only in pipelines for tags.</td>
</tr>
<tr>
<td><code>CI_COMMIT_TIMESTAMP</code></td>
<td>13.4</td>
<td>all</td>
<td>The timestamp of the commit in the ISO 8601 format.</td>
</tr>
<tr>
<td><code>CI_COMMIT_TITLE</code></td>
<td>10.8</td>
<td>all</td>
<td>The title of the commit. The full first line of the message.</td>
</tr>
<tr>
<td><code>CI_CONCURRENT_ID</code></td>
<td>all</td>
<td>11.10</td>
<td>The unique ID of build execution in a single executor.</td>
</tr>
<tr>
<td><code>CI_CONCURRENT_PROJECT_ID</code></td>
<td>all</td>
<td>11.10</td>
<td>The unique ID of build execution in a single executor and project.</td>
</tr>
<tr>
<td><code>CI_CONFIG_PATH</code></td>
<td>9.4</td>
<td>0.5</td>
<td>The path to the CI/CD configuration file. Defaults to <code>.gitlab-ci.yml</code>.</td>
</tr>
<tr>
<td><code>CI_DEBUG_TRACE</code></td>
<td>all</td>
<td>1.7</td>
<td><code>true</code> if <a href="https://docs.gitlab.com/ee/ci/variables/README.html#debug-logging" target="_blank">debug logging (tracing)</a> is enabled.</td>
</tr>
<tr>
<td><code>CI_DEFAULT_BRANCH</code></td>
<td>12.4</td>
<td>all</td>
<td>The name of the project&#x2019;s default branch.</td>
</tr>
<tr>
<td><code>CI_DEPENDENCY_PROXY_GROUP_IMAGE_PREFIX</code></td>
<td>13.7</td>
<td>all</td>
<td>The image prefix for pulling images through the Dependency Proxy.</td>
</tr>
<tr>
<td><code>CI_DEPENDENCY_PROXY_PASSWORD</code></td>
<td>13.7</td>
<td>all</td>
<td>The password to pull images through the Dependency Proxy.</td>
</tr>
<tr>
<td><code>CI_DEPENDENCY_PROXY_SERVER</code></td>
<td>13.7</td>
<td>all</td>
<td>The server for logging in to the Dependency Proxy. This is equivalent to <code>$CI_SERVER_HOST:$CI_SERVER_PORT</code>.</td>
</tr>
<tr>
<td><code>CI_DEPENDENCY_PROXY_USER</code></td>
<td>13.7</td>
<td>all</td>
<td>The username to pull images through the Dependency Proxy.</td>
</tr>
<tr>
<td><code>CI_DEPLOY_FREEZE</code></td>
<td>13.2</td>
<td>all</td>
<td>Only available if the pipeline runs during a <a href="https://docs.gitlab.com/ee/user/project/releases/index.html#prevent-unintentional-releases-by-setting-a-deploy-freeze" target="_blank">deploy freeze window</a>. <code>true</code> when available.</td>
</tr>
<tr>
<td><code>CI_DEPLOY_PASSWORD</code></td>
<td>10.8</td>
<td>all</td>
<td>The authentication password of the <a href="https://docs.gitlab.com/ee/user/project/deploy_tokens/index.html#gitlab-deploy-token" target="_blank">GitLab Deploy Token</a>, if the project has one.</td>
</tr>
<tr>
<td><code>CI_DEPLOY_USER</code></td>
<td>10.8</td>
<td>all</td>
<td>The authentication username of the <a href="https://docs.gitlab.com/ee/user/project/deploy_tokens/index.html#gitlab-deploy-token" target="_blank">GitLab Deploy Token</a>, if the project has one.</td>
</tr>
<tr>
<td><code>CI_DISPOSABLE_ENVIRONMENT</code></td>
<td>all</td>
<td>10.1</td>
<td>Only available if the job is executed in a disposable environment (something that is created only for this job and disposed of/destroyed after the execution - all executors except <code>shell</code> and <code>ssh</code>). <code>true</code> when available.</td>
</tr>
<tr>
<td><code>CI_ENVIRONMENT_NAME</code></td>
<td>8.15</td>
<td>all</td>
<td>The name of the environment for this job. Available if <a href="https://docs.gitlab.com/ee/ci/yaml/README.html#environmentname" target="_blank"><code>environment:name</code></a> is set.</td>
</tr>
<tr>
<td><code>CI_ENVIRONMENT_SLUG</code></td>
<td>8.15</td>
<td>all</td>
<td>The simplified version of the environment name, suitable for inclusion in DNS, URLs, Kubernetes labels, and so on. Available if <a href="https://docs.gitlab.com/ee/ci/yaml/README.html#environmentname" target="_blank"><code>environment:name</code></a> is set.</td>
</tr>
<tr>
<td><code>CI_ENVIRONMENT_URL</code></td>
<td>9.3</td>
<td>all</td>
<td>The URL of the environment for this job. Available if <a href="https://docs.gitlab.com/ee/ci/yaml/README.html#environmenturl" target="_blank"><code>environment:url</code></a> is set.</td>
</tr>
<tr>
<td><code>CI_HAS_OPEN_REQUIREMENTS</code></td>
<td>13.1</td>
<td>all</td>
<td>Only available if the pipeline&#x2019;s project has an open <a href="https://docs.gitlab.com/ee/user/project/requirements/index.html" target="_blank">requirement</a>. <code>true</code> when available.</td>
</tr>
<tr>
<td><code>CI_JOB_ID</code></td>
<td>9.0</td>
<td>all</td>
<td>job id</td>
</tr>
<tr>
<td><code>CI_JOB_IMAGE</code></td>
<td>12.9</td>
<td>12.9</td>
<td>&#x8FD0;&#x884C;job&#x7684;&#x5BB9;&#x5668;&#x7684;image</td>
</tr>
<tr>
<td><code>CI_JOB_JWT</code></td>
<td>12.10</td>
<td>all</td>
<td>A RS256 JSON web token to authenticate with third party systems that support JWT authentication, for example <a href="https://docs.gitlab.com/ee/ci/secrets/index.html" target="_blank">HashiCorp&#x2019;s Vault</a>.</td>
</tr>
<tr>
<td><code>CI_JOB_MANUAL</code></td>
<td>8.12</td>
<td>all</td>
<td>job&#x662F;&#x5426;&#x662F;&#x4EBA;&#x5DE5;&#x6267;&#x884C;&#x7684;</td>
</tr>
<tr>
<td><code>CI_JOB_NAME</code></td>
<td>8.12</td>
<td>all</td>
<td>job&#x540D;&#x79F0;</td>
</tr>
<tr>
<td><code>CI_JOB_STAGE</code></td>
<td>9.0</td>
<td>0.5</td>
<td>The name of the job&#x2019;s stage.</td>
</tr>
<tr>
<td><code>CI_JOB_STATUS</code></td>
<td>all</td>
<td>13.5</td>
<td>The status of the job as each runner stage is executed. Use with <a href="https://docs.gitlab.com/ee/ci/yaml/README.html#after_script" target="_blank"><code>after_script</code></a>. Can be <code>success</code>, <code>failed</code>, or <code>canceled</code>.</td>
</tr>
<tr>
<td><code>CI_JOB_TOKEN</code></td>
<td>9.0</td>
<td>1.2</td>
<td>A token to authenticate with <a href="https://docs.gitlab.com/ee/api/README.html#gitlab-cicd-job-token" target="_blank">certain API endpoints</a>. The token is valid as long as the job is running.</td>
</tr>
<tr>
<td><code>CI_JOB_URL</code></td>
<td>11.1</td>
<td>0.5</td>
<td>The job details URL.</td>
</tr>
<tr>
<td><code>CI_JOB_STARTED_AT</code></td>
<td>13.10</td>
<td>all</td>
<td>The UTC datetime when a job started, in <a href="https://tools.ietf.org/html/rfc3339#appendix-A" target="_blank">ISO 8601</a> format.</td>
</tr>
<tr>
<td><code>CI_KUBERNETES_ACTIVE</code></td>
<td>13.0</td>
<td>all</td>
<td>Only available if the pipeline has a Kubernetes cluster available for deployments. <code>true</code> when available.</td>
</tr>
<tr>
<td><code>CI_NODE_INDEX</code></td>
<td>11.5</td>
<td>all</td>
<td>The index of the job in the job set. Only available if the job uses <a href="https://docs.gitlab.com/ee/ci/yaml/README.html#parallel" target="_blank"><code>parallel</code></a>.</td>
</tr>
<tr>
<td><code>CI_NODE_TOTAL</code></td>
<td>11.5</td>
<td>all</td>
<td>The total number of instances of this job running in parallel. Set to <code>1</code> if the job does not use <a href="https://docs.gitlab.com/ee/ci/yaml/README.html#parallel" target="_blank"><code>parallel</code></a>.</td>
</tr>
<tr>
<td><code>CI_OPEN_MERGE_REQUESTS</code></td>
<td>13.8</td>
<td>all</td>
<td>A comma-separated list of up to four merge requests that use the current branch and project as the merge request source. Only available in branch and merge request pipelines if the branch has an associated merge request. For example, <code>gitlab-org/gitlab!333,gitlab-org/gitlab-foss!11</code>.</td>
</tr>
<tr>
<td><code>CI_PAGES_DOMAIN</code></td>
<td>11.8</td>
<td>all</td>
<td>The configured domain that hosts GitLab Pages.</td>
</tr>
<tr>
<td><code>CI_PAGES_URL</code></td>
<td>11.8</td>
<td>all</td>
<td>The URL for a GitLab Pages site. Always a subdomain of <code>CI_PAGES_DOMAIN</code>.</td>
</tr>
<tr>
<td><code>CI_PIPELINE_ID</code></td>
<td>8.10</td>
<td>all</td>
<td>&#x6D41;&#x6C34;&#x7EBF;ID&#xFF0C;gitlab&#x5B9E;&#x4F8B;&#x5185;&#x552F;&#x4E00;</td>
</tr>
<tr>
<td><code>CI_PIPELINE_IID</code></td>
<td>11.0</td>
<td>all</td>
<td>&#x6D41;&#x6C34;&#x7EBF;ID&#xFF0C;&#x9879;&#x76EE;&#x5185;&#x552F;&#x4E00;</td>
</tr>
<tr>
<td><code>CI_PIPELINE_SOURCE</code></td>
<td>10.0</td>
<td>all</td>
<td>How the pipeline was triggered. Can be <code>push</code>, <code>web</code>, <code>schedule</code>, <code>api</code>, <code>external</code>, <code>chat</code>, <code>webide</code>, <code>merge_request_event</code>, <code>external_pull_request_event</code>, <code>parent_pipeline</code>, <a href="https://docs.gitlab.com/ee/ci/triggers/README.html#authentication-tokens" target="_blank"><code>trigger</code>, or <code>pipeline</code></a>.</td>
</tr>
<tr>
<td><code>CI_PIPELINE_TRIGGERED</code></td>
<td>all</td>
<td>all</td>
<td><code>true</code> if the job was <a href="https://docs.gitlab.com/ee/ci/triggers/README.html" target="_blank">triggered</a>.</td>
</tr>
<tr>
<td><code>CI_PIPELINE_URL</code></td>
<td>11.1</td>
<td>0.5</td>
<td>The URL for the pipeline details.</td>
</tr>
<tr>
<td><code>CI_PIPELINE_CREATED_AT</code></td>
<td>13.10</td>
<td>all</td>
<td>The UTC datetime when the pipeline was created, in <a href="https://tools.ietf.org/html/rfc3339#appendix-A" target="_blank">ISO 8601</a> format.</td>
</tr>
<tr>
<td><code>CI_PROJECT_CONFIG_PATH</code></td>
<td>13.8</td>
<td>all</td>
<td>(Deprecated) The CI configuration path for the project. <a href="https://gitlab.com/gitlab-org/gitlab/-/issues/321334" target="_blank">Deprecated</a> in GitLab 13.10. <a href="https://gitlab.com/gitlab-org/gitlab/-/issues/322807" target="_blank">Removal planned</a> for GitLab 14.0.</td>
</tr>
<tr>
<td><code>CI_PROJECT_DIR</code></td>
<td>all</td>
<td>all</td>
<td>The full path the repository is cloned to, and where the job runs from. If the GitLab Runner <code>builds_dir</code> parameter is set, this variable is set relative to the value of <code>builds_dir</code>. For more information, see the <a href="https://docs.gitlab.com/runner/configuration/advanced-configuration.html#the-runners-section" target="_blank">Advanced GitLab Runner configuration</a>.</td>
</tr>
<tr>
<td><code>CI_PROJECT_ID</code></td>
<td>all</td>
<td>all</td>
<td>The ID of the current project. This ID is unique across all projects on the GitLab instance.</td>
</tr>
<tr>
<td><code>CI_PROJECT_NAME</code></td>
<td>8.10</td>
<td>0.5</td>
<td>The name of the directory for the project. For example if the project URL is <code>gitlab.example.com/group-name/project-1</code>, <code>CI_PROJECT_NAME</code> is <code>project-1</code>.</td>
</tr>
<tr>
<td><code>CI_PROJECT_NAMESPACE</code></td>
<td>8.10</td>
<td>0.5</td>
<td>The project namespace (username or group name) of the job.</td>
</tr>
<tr>
<td><code>CI_PROJECT_PATH_SLUG</code></td>
<td>9.3</td>
<td>all</td>
<td><code>$CI_PROJECT_PATH</code> in lowercase with characters that are not <code>a-z</code> or <code>0-9</code> replaced with <code>-</code>. Use in URLs and domain names.</td>
</tr>
<tr>
<td><code>CI_PROJECT_PATH</code></td>
<td>8.10</td>
<td>0.5</td>
<td>The project namespace with the project name included.</td>
</tr>
<tr>
<td><code>CI_PROJECT_REPOSITORY_LANGUAGES</code></td>
<td>12.3</td>
<td>all</td>
<td>A comma-separated, lowercase list of the languages used in the repository. For example <code>ruby,javascript,html,css</code>.</td>
</tr>
<tr>
<td><code>CI_PROJECT_ROOT_NAMESPACE</code></td>
<td>13.2</td>
<td>0.5</td>
<td>The root project namespace (username or group name) of the job. For example, if <code>CI_PROJECT_NAMESPACE</code> is <code>root-group/child-group/grandchild-group</code>, <code>CI_PROJECT_ROOT_NAMESPACE</code> is <code>root-group</code>.</td>
</tr>
<tr>
<td><code>CI_PROJECT_TITLE</code></td>
<td>12.4</td>
<td>all</td>
<td>The human-readable project name as displayed in the GitLab web interface.</td>
</tr>
<tr>
<td><code>CI_PROJECT_URL</code></td>
<td>8.10</td>
<td>0.5</td>
<td>The HTTP(S) address of the project.</td>
</tr>
<tr>
<td><code>CI_PROJECT_VISIBILITY</code></td>
<td>10.3</td>
<td>all</td>
<td>The project visibility. Can be <code>internal</code>, <code>private</code>, or <code>public</code>.</td>
</tr>
<tr>
<td><code>CI_REGISTRY_IMAGE</code></td>
<td>8.10</td>
<td>0.5</td>
<td>The address of the project&#x2019;s Container Registry. Only available if the Container Registry is enabled for the project.</td>
</tr>
<tr>
<td><code>CI_REGISTRY_PASSWORD</code></td>
<td>9.0</td>
<td>all</td>
<td>The password to push containers to the project&#x2019;s GitLab Container Registry. Only available if the Container Registry is enabled for the project.</td>
</tr>
<tr>
<td><code>CI_REGISTRY_USER</code></td>
<td>9.0</td>
<td>all</td>
<td>The username to push containers to the project&#x2019;s GitLab Container Registry. Only available if the Container Registry is enabled for the project.</td>
</tr>
<tr>
<td><code>CI_REGISTRY</code></td>
<td>8.10</td>
<td>0.5</td>
<td>The address of the GitLab Container Registry. Only available if the Container Registry is enabled for the project. This variable includes a <code>:port</code> value if one is specified in the registry configuration.</td>
</tr>
<tr>
<td><code>CI_REPOSITORY_URL</code></td>
<td>9.0</td>
<td>all</td>
<td>The URL to clone the Git repository.</td>
</tr>
<tr>
<td><code>CI_RUNNER_DESCRIPTION</code></td>
<td>8.10</td>
<td>0.5</td>
<td>The description of the runner.</td>
</tr>
<tr>
<td><code>CI_RUNNER_EXECUTABLE_ARCH</code></td>
<td>all</td>
<td>10.6</td>
<td>The OS/architecture of the GitLab Runner executable. Might not be the same as the environment of the executor.</td>
</tr>
<tr>
<td><code>CI_RUNNER_ID</code></td>
<td>8.10</td>
<td>0.5</td>
<td>The unique ID of the runner being used.</td>
</tr>
<tr>
<td><code>CI_RUNNER_REVISION</code></td>
<td>all</td>
<td>10.6</td>
<td>The revision of the runner running the job.</td>
</tr>
<tr>
<td><code>CI_RUNNER_SHORT_TOKEN</code></td>
<td>all</td>
<td>12.3</td>
<td>First eight characters of the runner&#x2019;s token used to authenticate new job requests. Used as the runner&#x2019;s unique ID.</td>
</tr>
<tr>
<td><code>CI_RUNNER_TAGS</code></td>
<td>8.10</td>
<td>0.5</td>
<td>A comma-separated list of the runner tags.</td>
</tr>
<tr>
<td><code>CI_RUNNER_VERSION</code></td>
<td>all</td>
<td>10.6</td>
<td>The version of the GitLab Runner running the job.</td>
</tr>
<tr>
<td><code>CI_SERVER_HOST</code></td>
<td>12.1</td>
<td>all</td>
<td>The host of the GitLab instance URL, without protocol or port. For example <code>gitlab.example.com</code>.</td>
</tr>
<tr>
<td><code>CI_SERVER_NAME</code></td>
<td>all</td>
<td>all</td>
<td>The name of CI/CD server that coordinates jobs.</td>
</tr>
<tr>
<td><code>CI_SERVER_PORT</code></td>
<td>12.8</td>
<td>all</td>
<td>The port of the GitLab instance URL, without host or protocol. For example <code>8080</code>.</td>
</tr>
<tr>
<td><code>CI_SERVER_PROTOCOL</code></td>
<td>12.8</td>
<td>all</td>
<td>The protocol of the GitLab instance URL, without host or port. For example <code>https</code>.</td>
</tr>
<tr>
<td><code>CI_SERVER_REVISION</code></td>
<td>all</td>
<td>all</td>
<td>GitLab revision that schedules jobs.</td>
</tr>
<tr>
<td><code>CI_SERVER_URL</code></td>
<td>12.7</td>
<td>all</td>
<td>The base URL of the GitLab instance, including protocol and port. For example <code>https://gitlab.example.com:8080</code>.</td>
</tr>
<tr>
<td><code>CI_SERVER_VERSION_MAJOR</code></td>
<td>11.4</td>
<td>all</td>
<td>The major version of the GitLab instance. For example, if the GitLab version is <code>13.6.1</code>, the <code>CI_SERVER_VERSION_MAJOR</code> is <code>13</code>.</td>
</tr>
<tr>
<td><code>CI_SERVER_VERSION_MINOR</code></td>
<td>11.4</td>
<td>all</td>
<td>The minor version of the GitLab instance. For example, if the GitLab version is <code>13.6.1</code>, the <code>CI_SERVER_VERSION_MINOR</code> is <code>6</code>.</td>
</tr>
<tr>
<td><code>CI_SERVER_VERSION_PATCH</code></td>
<td>11.4</td>
<td>all</td>
<td>The patch version of the GitLab instance. For example, if the GitLab version is <code>13.6.1</code>, the <code>CI_SERVER_VERSION_PATCH</code> is <code>1</code>.</td>
</tr>
<tr>
<td><code>CI_SERVER_VERSION</code></td>
<td>all</td>
<td>all</td>
<td>The full version of the GitLab instance.</td>
</tr>
<tr>
<td><code>CI_SERVER</code></td>
<td>all</td>
<td>all</td>
<td>Available for all jobs executed in CI/CD. <code>yes</code> when available.</td>
</tr>
<tr>
<td><code>CI_SHARED_ENVIRONMENT</code></td>
<td>all</td>
<td>10.1</td>
<td>Only available if the job is executed in a shared environment (something that is persisted across CI/CD invocations, like the <code>shell</code> or <code>ssh</code> executor). <code>true</code> when available.</td>
</tr>
<tr>
<td><code>GITLAB_CI</code></td>
<td>all</td>
<td>all</td>
<td>Available for all jobs executed in CI/CD. <code>true</code> when available.</td>
</tr>
<tr>
<td><code>GITLAB_FEATURES</code></td>
<td>10.6</td>
<td>all</td>
<td>The comma-separated list of licensed features available for the GitLab instance and license.</td>
</tr>
<tr>
<td><code>GITLAB_USER_EMAIL</code></td>
<td>8.12</td>
<td>all</td>
<td>The email of the user who started the job.</td>
</tr>
<tr>
<td><code>GITLAB_USER_ID</code></td>
<td>8.12</td>
<td>all</td>
<td>The ID of the user who started the job.</td>
</tr>
<tr>
<td><code>GITLAB_USER_LOGIN</code></td>
<td>10.0</td>
<td>all</td>
<td>The username of the user who started the job.</td>
</tr>
<tr>
<td><code>GITLAB_USER_NAME</code></td>
<td>10.0</td>
<td>all</td>
<td>The name of the user who started the job.</td>
</tr>
<tr>
<td><code>TRIGGER_PAYLOAD</code></td>
<td>13.9</td>
<td>all</td>
<td>The webhook payload. Only available when a pipeline is <a href="https://docs.gitlab.com/ee/ci/triggers/README.html#using-webhook-payload-in-the-triggered-pipeline" target="_blank">triggered with a webhook</a>.</td>
</tr>
</tbody>
</table>
<h2 id="&#x5B66;&#x4E60;&#x94FE;&#x63A5;">&#x5B66;&#x4E60;&#x94FE;&#x63A5;</h2>
<p><a href="https://fizzz.blog.csdn.net/article/details/119764533?spm=1001.2101.3001.6661.1&amp;utm_medium=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1-119764533-blog-107552156.pc_relevant_multi_platform_whitelistv1&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1-119764533-blog-107552156.pc_relevant_multi_platform_whitelistv1&amp;utm_relevant_index=1" target="_blank">&#x5B9E;&#x6218;&#xFF1A;&#x4ECE; 0 &#x5230; 1 &#x6781;&#x72D0;GitLab CI/CD &#x524D;&#x7AEF;&#x6301;&#x7EED;&#x90E8;&#x7F72;_&#x62FF;&#x6211;&#x683C;&#x5B50;&#x886B;&#x6765;&#x7684;&#x535A;&#x5BA2;-CSDN&#x535A;&#x5BA2;</a></p>
<p><a href="https://fizzz.blog.csdn.net/article/details/108346647?spm=1001.2014.3001.5502" target="_blank">&#x5728;CI/CD&#x4E2D;&#x6F14;&#x793A;&#x524D;&#x7AEF;&#x4E09;&#x79CD;&#x90E8;&#x7F72;&#x65B9;&#x6848;&#xFF0C;&#x955C;&#x50CF;&#x90E8;&#x7F72;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x90E8;&#x7F72;&#xFF0C;OSS&#x90E8;&#x7F72;_&#x62FF;&#x6211;&#x683C;&#x5B50;&#x886B;&#x6765;&#x7684;&#x535A;&#x5BA2;-CSDN&#x535A;&#x5BA2;</a></p>
<p><a href="https://juejin.cn/post/7037022688493338661" target="_blank">&#x1F6EB; &#x524D;&#x7AEF;&#x81EA;&#x52A8;&#x5316;&#x90E8;&#x7F72;&#xFF1A;&#x501F;&#x52A9;Gitlab CI/CD&#x5B9E;&#x73B0; - &#x6398;&#x91D1;</a></p>
<p><a href="https://blog.csdn.net/weixin_43835717/article/details/102073410" target="_blank">Docker&#x5B89;&#x88C5;Gitlab&#x548C;Runner&#x5E76;&#x5B9E;&#x73B0;CICD_&#x5305;&#x542B;&#x5982;&#x4F55;&#x521B;&#x5EFA;&#x81EA;&#x5DF1;&#x7684;docker</a></p>
<p><a href="https://www.cnblogs.com/wangshuyang/p/14110065.html" target="_blank">gitlab CI&#x6D41;&#x6C34;&#x7EBF;&#x914D;&#x7F6E;&#x6587;&#x4EF6;.gitlab-ci.yml&#x8BE6;&#x89E3;</a></p>
<p><a href="https://blog.csdn.net/sandaawa/article/details/112897733" target="_blank">GitLab&#x5982;&#x4F55;&#x4F7F;CI/CD&#x4EC5;&#x9650;&#x6307;&#x5B9A;&#x7528;&#x6237;&#x4F7F;&#x7528;_sandaawa&#x7684;&#x535A;&#x5BA2;-CSDN&#x535A;&#x5BA2;</a></p>
<h2 id="release&#x547D;&#x4EE4;&#x6D4B;&#x8BD5;">Release&#x547D;&#x4EE4;&#x6D4B;&#x8BD5;</h2>
<p>&#x6587;&#x6863;&#x94FE;&#x63A5;&#xFF1A;<a href="https://docs.gitlab.com/ee/api/releases/index.html" target="_blank">Releases API | GitLab</a></p>
<p>&#x521B;&#x5EFA;release</p>
<pre><code>curl -H &quot;Content-Type: application/json&quot; -H &quot;PRIVATE-TOKEN: your token&quot; -d &apos;{ &quot;name&quot;: &quot;v2.1.8-alpha1-1656989338&quot;, &quot;tag_name&quot;: &quot;v2.1.8-alpha1-1656989338&quot;, &quot;ref&quot;:&quot;4b8756a1f27e3a8b0608ebe3a9ecde1255b6ba54&quot; ,&quot;description&quot;: &quot;&#x6D4B;&#x8BD5;release&quot;}&apos; --request POST http://gitlab.com/api/v4/projects/projectId/releases
</code></pre><p>&#x5220;&#x9664;release</p>
<pre><code>curl --request DELETE --header &quot;PRIVATE-TOKEN: your token&quot; &quot;http://gitlab.com/api/v4/projects/projectId/releases/:tag_name&quot;
</code></pre>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Android原生Table组件开发整理.html" class="navigation navigation-prev " aria-label="Previous page: Android原生Table组件开发整理">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="RN中场景一之RN和原生交互.html" class="navigation navigation-next " aria-label="Next page: RN中场景一之RN和原生交互">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Gitlab CI/CD","level":"1.16","depth":1,"next":{"title":"RN中场景一之RN和原生交互","level":"1.17","depth":1,"path":"RN中场景一之RN和原生交互.md","ref":"RN中场景一之RN和原生交互.md","articles":[]},"previous":{"title":"Android原生Table组件开发整理","level":"1.15","depth":1,"path":"Android原生Table组件开发整理.md","ref":"Android原生Table组件开发整理.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"Gitlab.md","mtime":"2023-03-27T06:39:22.414Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2023-03-27T07:03:27.764Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

